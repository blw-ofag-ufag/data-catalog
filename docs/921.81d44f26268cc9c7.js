"use strict";(self.webpackChunkDigiAgriFoodDB=self.webpackChunkDigiAgriFoodDB||[]).push([[921],{5921:(N,m,k)=>{k.r(m),k.d(m,{diagram:()=>U});var B=k(467),x=k(8530),C=k(5011),$=k(3934),a=k(3721),D=k(4756),E={packet:[]},v=structuredClone(E),P=a.UI.packet,w=(0,a.K2)(()=>{const t=(0,C.$t)({...P,...(0,a.zj)().packet});return t.showBits&&(t.paddingY+=10),t},"getConfig"),y=(0,a.K2)(()=>v.packet,"getPacket"),b={pushWord:(0,a.K2)(t=>{t.length>0&&v.packet.push(t)},"pushWord"),getPacket:y,getConfig:w,clear:(0,a.K2)(()=>{(0,a.IU)(),v=structuredClone(E)},"clear"),setAccTitle:a.SV,getAccTitle:a.iN,setDiagramTitle:a.ke,getDiagramTitle:a.ab,getAccDescription:a.m7,setAccDescription:a.EI},F=(0,a.K2)(t=>{(0,x.S)(t,b);let e=-1,o=[],s=1;const{bitsPerRow:l}=b.getConfig();for(let{start:r,end:n,bits:c,label:h}of t.blocks){if(void 0!==r&&void 0!==n&&n<r)throw new Error(`Packet block ${r} - ${n} is invalid. End must be greater than start.`);if(r??=e+1,r!==e+1)throw new Error(`Packet block ${r} - ${n??r} is not contiguous. It should start from ${e+1}.`);if(0===c)throw new Error(`Packet block ${r} is invalid. Cannot have a zero bit field.`);for(n??=r+(c??1)-1,c??=n-r+1,e=n,a.Rm.debug(`Packet block ${r} - ${e} with label ${h}`);o.length<=l+1&&b.getPacket().length<1e4;){const[d,g]=M({start:r,end:n,bits:c,label:h},s,l);if(o.push(d),d.end+1===s*l&&(b.pushWord(o),o=[],s++),!g)break;({start:r,end:n,bits:c,label:h}=g)}}b.pushWord(o)},"populate"),M=(0,a.K2)((t,e,o)=>{if(void 0===t.start)throw new Error("start should have been set during first phase");if(void 0===t.end)throw new Error("end should have been set during first phase");if(t.start>t.end)throw new Error(`Block start ${t.start} is greater than block end ${t.end}.`);if(t.end+1<=e*o)return[t,void 0];const s=e*o-1,l=e*o;return[{start:t.start,end:s,label:t.label,bits:s-t.start},{start:l,end:t.end,label:t.label,bits:t.end-l}]},"getNextFittingBlock"),O={parse:(0,a.K2)(function(){var t=(0,B.A)(function*(e){const o=yield(0,D.qg)("packet",e);a.Rm.debug(o),F(o)});return function(e){return t.apply(this,arguments)}}(),"parse")},S=(0,a.K2)((t,e,o,s)=>{const l=s.db,r=l.getConfig(),{rowHeight:n,paddingY:c,bitWidth:h,bitsPerRow:d}=r,g=l.getPacket(),i=l.getDiagramTitle(),f=n+c,p=f*(g.length+1)-(i?0:n),u=h*d+2,_=(0,$.D)(e);_.attr("viewbox",`0 0 ${u} ${p}`),(0,a.a$)(_,p,u,r.useMaxWidth);for(const[L,j]of g.entries())T(_,j,L,r);_.append("text").text(i).attr("x",u/2).attr("y",p-f/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),T=(0,a.K2)((t,e,o,{rowHeight:s,paddingX:l,paddingY:r,bitWidth:n,bitsPerRow:c,showBits:h})=>{const d=t.append("g"),g=o*(s+r)+r;for(const i of e){const f=i.start%c*n+1,p=(i.end-i.start+1)*n-l;if(d.append("rect").attr("x",f).attr("y",g).attr("width",p).attr("height",s).attr("class","packetBlock"),d.append("text").attr("x",f+p/2).attr("y",g+s/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(i.label),!h)continue;const u=i.end===i.start,_=g-2;d.append("text").attr("x",f+(u?p/2:0)).attr("y",_).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",u?"middle":"start").text(i.start),u||d.append("text").attr("x",f+p).attr("y",_).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(i.end)}},"drawWord"),I={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},U={parser:O,db:b,renderer:{draw:S},styles:(0,a.K2)(({packet:t}={})=>{const e=(0,C.$t)(I,t);return`\n\t.packetByte {\n\t\tfont-size: ${e.byteFontSize};\n\t}\n\t.packetByte.start {\n\t\tfill: ${e.startByteColor};\n\t}\n\t.packetByte.end {\n\t\tfill: ${e.endByteColor};\n\t}\n\t.packetLabel {\n\t\tfill: ${e.labelColor};\n\t\tfont-size: ${e.labelFontSize};\n\t}\n\t.packetTitle {\n\t\tfill: ${e.titleColor};\n\t\tfont-size: ${e.titleFontSize};\n\t}\n\t.packetBlock {\n\t\tstroke: ${e.blockStrokeColor};\n\t\tstroke-width: ${e.blockStrokeWidth};\n\t\tfill: ${e.blockFillColor};\n\t}\n\t`},"styles")}}}]);