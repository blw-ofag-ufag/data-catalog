(self.webpackChunkDigiAgriFoodDB=self.webpackChunkDigiAgriFoodDB||[]).push([[332],{4332:(ee,vt,Et)=>{"use strict";Et.r(vt),Et.d(vt,{diagram:()=>q});var R=Et(467),y=Et(1403),h=Et(8530),o=Et(9401),a=Et(5011),s=Et(3934),f=Et(3721),e=Et(4756),d=Et(9516),t=Et(7236),i=Et(9266),l={L:"left",R:"right",T:"top",B:"bottom"},g={L:(0,f.K2)(v=>`${v},${v/2} 0,${v} 0,0`,"L"),R:(0,f.K2)(v=>`0,${v/2} ${v},0 ${v},${v}`,"R"),T:(0,f.K2)(v=>`0,0 ${v},0 ${v/2},${v}`,"T"),B:(0,f.K2)(v=>`${v/2},0 ${v},${v} 0,${v}`,"B")},u={L:(0,f.K2)((v,A)=>v-A+2,"L"),R:(0,f.K2)((v,A)=>v-2,"R"),T:(0,f.K2)((v,A)=>v-A+2,"T"),B:(0,f.K2)((v,A)=>v-2,"B")},T=(0,f.K2)(function(v){return M(v)?"L"===v?"R":"L":"T"===v?"B":"T"},"getOppositeArchitectureDirection"),c=(0,f.K2)(function(v){return"L"===v||"R"===v||"T"===v||"B"===v},"isArchitectureDirection"),M=(0,f.K2)(function(v){return"L"===v||"R"===v},"isArchitectureDirectionX"),N=(0,f.K2)(function(v){return"T"===v||"B"===v},"isArchitectureDirectionY"),L=(0,f.K2)(function(v,A){const C=M(v)&&N(A),Z=N(v)&&M(A);return C||Z},"isArchitectureDirectionXY"),D=(0,f.K2)(function(v){const A=v[0],C=v[1],Z=M(A)&&N(C),G=N(A)&&M(C);return Z||G},"isArchitecturePairXY"),et=(0,f.K2)(function(v){return"LL"!==v&&"RR"!==v&&"TT"!==v&&"BB"!==v},"isValidArchitectureDirectionPair"),x=(0,f.K2)(function(v,A){const C=`${v}${A}`;return et(C)?C:void 0},"getArchitectureDirectionPair"),nt=(0,f.K2)(function([v,A],C){const Z=C[0],G=C[1];return M(Z)?N(G)?[v+("L"===Z?-1:1),A+("T"===G?1:-1)]:[v+("L"===Z?-1:1),A]:M(G)?[v+("L"===G?1:-1),A+("T"===Z?1:-1)]:[v,A+("T"===Z?1:-1)]},"shiftPositionByArchitectureDirectionPair"),dt=(0,f.K2)(function(v){return"LT"===v||"TL"===v?[1,1]:"BL"===v||"LB"===v?[1,-1]:"BR"===v||"RB"===v?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),ct=(0,f.K2)(function(v,A){return L(v,A)?"bend":M(v)?"horizontal":"vertical"},"getArchitectureDirectionAlignment"),mt=(0,f.K2)(function(v){return"service"===v.type},"isArchitectureService"),P=(0,f.K2)(function(v){return"junction"===v.type},"isArchitectureJunction"),J=(0,f.K2)(v=>v.data(),"edgeData"),r=(0,f.K2)(v=>v.data(),"nodeData"),m=f.UI.architecture,n=new o.m(()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:m,dataStructures:void 0,elements:{}})),E=(0,f.K2)(()=>{n.reset(),(0,f.IU)()},"clear"),p=(0,f.K2)(function({id:v,icon:A,in:C,title:Z,iconText:G}){if(void 0!==n.records.registeredIds[v])throw new Error(`The service id [${v}] is already in use by another ${n.records.registeredIds[v]}`);if(void 0!==C){if(v===C)throw new Error(`The service [${v}] cannot be placed within itself`);if(void 0===n.records.registeredIds[C])throw new Error(`The service [${v}]'s parent does not exist. Please make sure the parent is created before this service`);if("node"===n.records.registeredIds[C])throw new Error(`The service [${v}]'s parent is not a group`)}n.records.registeredIds[v]="node",n.records.nodes[v]={id:v,type:"service",icon:A,iconText:G,title:Z,edges:[],in:C}},"addService"),I=(0,f.K2)(()=>Object.values(n.records.nodes).filter(mt),"getServices"),w=(0,f.K2)(function({id:v,in:A}){n.records.registeredIds[v]="node",n.records.nodes[v]={id:v,type:"junction",edges:[],in:A}},"addJunction"),X=(0,f.K2)(()=>Object.values(n.records.nodes).filter(P),"getJunctions"),Y=(0,f.K2)(()=>Object.values(n.records.nodes),"getNodes"),b=(0,f.K2)(v=>n.records.nodes[v],"getNode"),tt=(0,f.K2)(function({id:v,icon:A,in:C,title:Z}){if(void 0!==n.records.registeredIds[v])throw new Error(`The group id [${v}] is already in use by another ${n.records.registeredIds[v]}`);if(void 0!==C){if(v===C)throw new Error(`The group [${v}] cannot be placed within itself`);if(void 0===n.records.registeredIds[C])throw new Error(`The group [${v}]'s parent does not exist. Please make sure the parent is created before this group`);if("node"===n.records.registeredIds[C])throw new Error(`The group [${v}]'s parent is not a group`)}n.records.registeredIds[v]="group",n.records.groups[v]={id:v,icon:A,title:Z,in:C}},"addGroup"),lt=(0,f.K2)(()=>Object.values(n.records.groups),"getGroups"),W=(0,f.K2)(function({lhsId:v,rhsId:A,lhsDir:C,rhsDir:Z,lhsInto:G,rhsInto:S,lhsGroup:F,rhsGroup:$,title:ot}){if(!c(C))throw new Error(`Invalid direction given for left hand side of edge ${v}--${A}. Expected (L,R,T,B) got ${C}`);if(!c(Z))throw new Error(`Invalid direction given for right hand side of edge ${v}--${A}. Expected (L,R,T,B) got ${Z}`);if(void 0===n.records.nodes[v]&&void 0===n.records.groups[v])throw new Error(`The left-hand id [${v}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(void 0===n.records.nodes[A]&&void 0===n.records.groups[v])throw new Error(`The right-hand id [${A}] does not yet exist. Please create the service/group before declaring an edge to it.`);const U=n.records.nodes[v].in,at=n.records.nodes[A].in;if(F&&U&&at&&U==at)throw new Error(`The left-hand id [${v}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if($&&U&&at&&U==at)throw new Error(`The right-hand id [${A}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);n.records.edges.push({lhsId:v,lhsDir:C,lhsInto:G,lhsGroup:F,rhsId:A,rhsDir:Z,rhsInto:S,rhsGroup:$,title:ot}),n.records.nodes[v]&&n.records.nodes[A]&&(n.records.nodes[v].edges.push(n.records.edges[n.records.edges.length-1]),n.records.nodes[A].edges.push(n.records.edges[n.records.edges.length-1]))},"addEdge"),ht=(0,f.K2)(()=>n.records.edges,"getEdges"),_=(0,f.K2)(()=>{if(void 0===n.records.dataStructures){const v={},A=Object.entries(n.records.nodes).reduce(($,[ot,U])=>($[ot]=U.edges.reduce((at,H)=>{const k=b(H.lhsId)?.in,rt=b(H.rhsId)?.in;if(k&&rt&&k!==rt){const B=ct(H.lhsDir,H.rhsDir);"bend"!==B&&(v[k]??={},v[k][rt]=B,v[rt]??={},v[rt][k]=B)}if(H.lhsId===ot){const B=x(H.lhsDir,H.rhsDir);B&&(at[B]=H.rhsId)}else{const B=x(H.rhsDir,H.lhsDir);B&&(at[B]=H.lhsId)}return at},{}),$),{}),C=Object.keys(A)[0],Z={[C]:1},G=Object.keys(A).reduce(($,ot)=>ot===C?$:{...$,[ot]:1},{}),S=(0,f.K2)($=>{const ot={[$]:[0,0]},U=[$];for(;U.length>0;){const at=U.shift();if(at){Z[at]=1,delete G[at];const H=A[at],[k,rt]=ot[at];Object.entries(H).forEach(([B,j])=>{Z[j]||(ot[j]=nt([k,rt],B),U.push(j))})}}return ot},"BFS"),F=[S(C)];for(;Object.keys(G).length>0;)F.push(S(Object.keys(G)[0]));n.records.dataStructures={adjList:A,spatialMaps:F,groupAlignments:v}}return n.records.dataStructures},"getDataStructures"),O=(0,f.K2)((v,A)=>{n.records.elements[v]=A},"setElementForId"),z=(0,f.K2)(v=>n.records.elements[v],"getElementById"),K=(0,f.K2)(()=>(0,a.$t)({...m,...(0,f.zj)().architecture}),"getConfig"),st={clear:E,setDiagramTitle:f.ke,getDiagramTitle:f.ab,setAccTitle:f.SV,getAccTitle:f.iN,setAccDescription:f.EI,getAccDescription:f.m7,getConfig:K,addService:p,getServices:I,addJunction:w,getJunctions:X,getNodes:Y,getNode:b,addGroup:tt,getGroups:lt,addEdge:W,getEdges:ht,setElementForId:O,getElementById:z,getDataStructures:_};function ft(v){return K()[v]}(0,f.K2)(ft,"getConfigField");var it=(0,f.K2)((v,A)=>{(0,h.S)(v,A),v.groups.map(A.addGroup),v.services.map(C=>A.addService({...C,type:"service"})),v.junctions.map(C=>A.addJunction({...C,type:"junction"})),v.edges.map(A.addEdge)},"populateDb"),Pt={parse:(0,f.K2)(function(){var v=(0,R.A)(function*(A){const C=yield(0,e.qg)("architecture",A);f.Rm.debug(C),it(C,st)});return function(A){return v.apply(this,arguments)}}(),"parse")},kt=(0,f.K2)(v=>`\n  .edge {\n    stroke-width: ${v.archEdgeWidth};\n    stroke: ${v.archEdgeColor};\n    fill: none;\n  }\n\n  .arrow {\n    fill: ${v.archEdgeArrowColor};\n  }\n\n  .node-bkg {\n    fill: none;\n    stroke: ${v.archGroupBorderColor};\n    stroke-width: ${v.archGroupBorderWidth};\n    stroke-dasharray: 8;\n  }\n  .node-icon-text {\n    display: flex; \n    align-items: center;\n  }\n  \n  .node-icon-text > div {\n    color: #fff;\n    margin: 1px;\n    height: fit-content;\n    text-align: center;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n  }\n`,"getStyles"),Ut=(0,f.K2)(v=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${v}</g>`,"wrapIcon"),ut={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:Ut('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:Ut('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:Ut('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:Ut('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:Ut('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:y.Gc,blank:{body:Ut("")}}},gt=(0,f.K2)(function(){var v=(0,R.A)(function*(A,C){const Z=ft("padding"),G=ft("iconSize"),S=G/2,F=G/6,$=F/2;yield Promise.all(C.edges().map(function(){var ot=(0,R.A)(function*(U){const{source:at,sourceDir:H,sourceArrow:k,sourceGroup:rt,target:B,targetDir:j,targetArrow:Ot,targetGroup:pt,label:yt}=J(U);let{x:It,y:Nt}=U[0].sourceEndpoint();const{x:St,y:wt}=U[0].midpoint();let{x:Gt,y:zt}=U[0].targetEndpoint();const Ht=Z+4;if(rt&&(M(H)?It+="L"===H?-Ht:Ht:Nt+="T"===H?-Ht:Ht+18),pt&&(M(j)?Gt+="L"===j?-Ht:Ht:zt+="T"===j?-Ht:Ht+18),!rt&&"junction"===st.getNode(at)?.type&&(M(H)?It+="L"===H?S:-S:Nt+="T"===H?S:-S),!pt&&"junction"===st.getNode(B)?.type&&(M(j)?Gt+="L"===j?S:-S:zt+="T"===j?S:-S),U[0]._private.rscratch){const Vt=A.insert("g");if(Vt.insert("path").attr("d",`M ${It},${Nt} L ${St},${wt} L${Gt},${zt} `).attr("class","edge"),k){const $t=M(H)?u[H](It,F):It-$,Zt=N(H)?u[H](Nt,F):Nt-$;Vt.insert("polygon").attr("points",g[H](F)).attr("transform",`translate(${$t},${Zt})`).attr("class","arrow")}if(Ot){const $t=M(j)?u[j](Gt,F):Gt-$,Zt=N(j)?u[j](zt,F):zt-$;Vt.insert("polygon").attr("points",g[j](F)).attr("transform",`translate(${$t},${Zt})`).attr("class","arrow")}if(yt){const $t=L(H,j)?"XY":M(H)?"X":"Y";let Zt=0;Zt="X"===$t?Math.abs(It-Gt):"Y"===$t?Math.abs(Nt-zt)/1.5:Math.abs(It-Gt)/2;const Kt=Vt.append("g");if(yield(0,y.GZ)(Kt,yt,{useHtmlLabels:!1,width:Zt,classes:"architecture-service-label"},(0,f.D7)()),Kt.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),"X"===$t)Kt.attr("transform","translate("+St+", "+wt+")");else if("Y"===$t)Kt.attr("transform","translate("+St+", "+wt+") rotate(-90)");else if("XY"===$t){const _t=x(H,j);if(_t&&D(_t)){const jt=Kt.node().getBoundingClientRect(),[qt,re]=dt(_t);Kt.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*qt*re*45})`);const ie=Kt.node().getBoundingClientRect();Kt.attr("transform",`\n                translate(${St}, ${wt-jt.height/2})\n                translate(${qt*ie.width/2}, ${re*ie.height/2})\n                rotate(${-1*qt*re*45}, 0, ${jt.height/2})\n              `)}}}}});return function(U){return ot.apply(this,arguments)}}()))});return function(A,C){return v.apply(this,arguments)}}(),"drawEdges"),xt=(0,f.K2)(function(){var v=(0,R.A)(function*(A,C){const G=.75*ft("padding"),S=ft("fontSize"),$=ft("iconSize")/2;yield Promise.all(C.nodes().map(function(){var ot=(0,R.A)(function*(U){const at=r(U);if("group"===at.type){const{h:H,w:k,x1:rt,y1:B}=U.boundingBox();A.append("rect").attr("x",rt+$).attr("y",B+$).attr("width",k).attr("height",H).attr("class","node-bkg");const j=A.append("g");let Ot=rt,pt=B;if(at.icon){const yt=j.append("g");yt.html(`<g>${yield(0,y.WY)(at.icon,{height:G,width:G,fallbackPrefix:ut.prefix})}</g>`),yt.attr("transform","translate("+(Ot+$+1)+", "+(pt+$+1)+")"),Ot+=G,pt+=S/2-1-2}if(at.label){const yt=j.append("g");yield(0,y.GZ)(yt,at.label,{useHtmlLabels:!1,width:k,classes:"architecture-service-label"},(0,f.D7)()),yt.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),yt.attr("transform","translate("+(Ot+$+4)+", "+(pt+$+2)+")")}}});return function(U){return ot.apply(this,arguments)}}()))});return function(A,C){return v.apply(this,arguments)}}(),"drawGroups"),Dt=(0,f.K2)(function(){var v=(0,R.A)(function*(A,C,Z){for(const G of Z){const S=C.append("g"),F=ft("iconSize");if(G.title){const at=S.append("g");yield(0,y.GZ)(at,G.title,{useHtmlLabels:!1,width:1.5*F,classes:"architecture-service-label"},(0,f.D7)()),at.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),at.attr("transform","translate("+F/2+", "+F+")")}const $=S.append("g");if(G.icon)$.html(`<g>${yield(0,y.WY)(G.icon,{height:F,width:F,fallbackPrefix:ut.prefix})}</g>`);else if(G.iconText){$.html(`<g>${yield(0,y.WY)("blank",{height:F,width:F,fallbackPrefix:ut.prefix})}</g>`);const k=$.append("g").append("foreignObject").attr("width",F).attr("height",F).append("div").attr("class","node-icon-text").attr("style",`height: ${F}px;`).append("div").html(G.iconText),rt=parseInt(window.getComputedStyle(k.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;k.attr("style",`-webkit-line-clamp: ${Math.floor((F-2)/rt)};`)}else $.append("path").attr("class","node-bkg").attr("id","node-"+G.id).attr("d",`M0 ${F} v${-F} q0,-5 5,-5 h${F} q5,0 5,5 v${F} H0 Z`);S.attr("class","architecture-service");const{width:ot,height:U}=S._groups[0][0].getBBox();G.width=ot,G.height=U,A.setElementForId(G.id,S)}return 0});return function(A,C,Z){return v.apply(this,arguments)}}(),"drawServices"),At=(0,f.K2)(function(v,A,C){C.forEach(Z=>{const G=A.append("g"),S=ft("iconSize");G.append("g").append("rect").attr("id","node-"+Z.id).attr("fill-opacity","0").attr("width",S).attr("height",S),G.attr("class","architecture-junction");const{width:$,height:ot}=G._groups[0][0].getBBox();G.width=$,G.height=ot,v.setElementForId(Z.id,G)})},"drawJunctions");function Ct(v,A){v.forEach(C=>{A.add({group:"nodes",data:{type:"service",id:C.id,icon:C.icon,label:C.title,parent:C.in,width:ft("iconSize"),height:ft("iconSize")},classes:"node-service"})})}function Mt(v,A){v.forEach(C=>{A.add({group:"nodes",data:{type:"junction",id:C.id,parent:C.in,width:ft("iconSize"),height:ft("iconSize")},classes:"node-junction"})})}function Rt(v,A){A.nodes().map(C=>{const Z=r(C);"group"!==Z.type&&(Z.x=C.position().x,Z.y=C.position().y,v.getElementById(Z.id).attr("transform","translate("+(Z.x||0)+","+(Z.y||0)+")"))})}function Wt(v,A){v.forEach(C=>{A.add({group:"nodes",data:{type:"group",id:C.id,icon:C.icon,label:C.title,parent:C.in},classes:"node-group"})})}function Jt(v,A){v.forEach(C=>{const{lhsId:Z,rhsId:G,lhsInto:S,lhsGroup:F,rhsInto:$,lhsDir:ot,rhsDir:U,rhsGroup:at,title:H}=C,k=L(C.lhsDir,C.rhsDir)?"segments":"straight";A.add({group:"edges",data:{id:`${Z}-${G}`,label:H,source:Z,sourceDir:ot,sourceArrow:S,sourceGroup:F,sourceEndpoint:"L"===ot?"0 50%":"R"===ot?"100% 50%":"T"===ot?"50% 0":"50% 100%",target:G,targetDir:U,targetArrow:$,targetGroup:at,targetEndpoint:"L"===U?"0 50%":"R"===U?"100% 50%":"T"===U?"50% 0":"50% 100%"},classes:k})})}function bt(v,A,C){const Z=(0,f.K2)(($,ot)=>Object.entries($).reduce((U,[at,H])=>{let k=0;const rt=Object.entries(H);if(1===rt.length)return U[at]=rt[0][1],U;for(let B=0;B<rt.length-1;B++)for(let j=B+1;j<rt.length;j++){const[Ot,pt]=rt[B],[yt,It]=rt[j];C[Ot]?.[yt]===ot||"default"===Ot||"default"===yt?(U[at]??=[],U[at]=[...U[at],...pt,...It]):(U[`${at}-${k++}`]=pt,U[`${at}-${k++}`]=It)}return U},{}),"flattenAlignments"),G=A.map($=>{const ot={},U={};return Object.entries($).forEach(([at,[H,k]])=>{const rt=v.getNode(at)?.in??"default";ot[k]??={},ot[k][rt]??=[],ot[k][rt].push(at),U[H]??={},U[H][rt]??=[],U[H][rt].push(at)}),{horiz:Object.values(Z(ot,"horizontal")).filter(at=>at.length>1),vert:Object.values(Z(U,"vertical")).filter(at=>at.length>1)}}),[S,F]=G.reduce(([$,ot],{horiz:U,vert:at})=>[[...$,...U],[...ot,...at]],[[],[]]);return{horizontal:S,vertical:F}}function Yt(v){const A=[],C=(0,f.K2)(G=>`${G[0]},${G[1]}`,"posToStr"),Z=(0,f.K2)(G=>G.split(",").map(S=>parseInt(S)),"strToPos");return v.forEach(G=>{const S=Object.fromEntries(Object.entries(G).map(([U,at])=>[C(at),U])),F=[C([0,0])],$={},ot={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;F.length>0;){const U=F.shift();if(U){$[U]=1;const at=S[U];if(at){const H=Z(U);Object.entries(ot).forEach(([k,rt])=>{const B=C([H[0]+rt[0],H[1]+rt[1]]),j=S[B];j&&!$[B]&&(F.push(B),A.push({[l[k]]:j,[l[T(k)]]:at,gap:1.5*ft("iconSize")}))})}}}}),A}function Xt(v,A,C,Z,G,{spatialMaps:S,groupAlignments:F}){return new Promise($=>{const ot=(0,i.Ltv)("body").append("div").attr("id","cy").attr("style","display:none"),U=(0,d.A)({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${ft("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${ft("padding")}px`}}]});ot.remove(),Wt(C,U),Ct(v,U),Mt(A,U),Jt(Z,U);const at=bt(G,S,F),H=Yt(S),k=U.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(rt){const[B,j]=rt.connectedNodes(),{parent:Ot}=r(B),{parent:pt}=r(j);return Ot===pt?1.5*ft("iconSize"):.5*ft("iconSize")},edgeElasticity(rt){const[B,j]=rt.connectedNodes(),{parent:Ot}=r(B),{parent:pt}=r(j);return Ot===pt?.45:.001},alignmentConstraint:at,relativePlacementConstraint:H});k.one("layoutstop",()=>{function rt(B,j,Ot,pt){let yt,It;const{x:Nt,y:St}=B,{x:wt,y:Gt}=j;It=(pt-St+(Nt-Ot)*(St-Gt)/(Nt-wt))/Math.sqrt(1+Math.pow((St-Gt)/(Nt-wt),2)),yt=Math.sqrt(Math.pow(pt-St,2)+Math.pow(Ot-Nt,2)-Math.pow(It,2)),yt/=Math.sqrt(Math.pow(wt-Nt,2)+Math.pow(Gt-St,2));let Ht=(wt-Nt)*(pt-St)-(Gt-St)*(Ot-Nt);switch(!0){case Ht>=0:Ht=1;break;case Ht<0:Ht=-1}let Vt=(wt-Nt)*(Ot-Nt)+(Gt-St)*(pt-St);switch(!0){case Vt>=0:Vt=1;break;case Vt<0:Vt=-1}return It=Math.abs(It)*Ht,yt*=Vt,{distances:It,weights:yt}}(0,f.K2)(rt,"getSegmentWeights"),U.startBatch();for(const B of Object.values(U.edges()))if(B.data?.()){const{x:j,y:Ot}=B.source().position(),{x:pt,y:yt}=B.target().position();if(j!==pt&&Ot!==yt){const It=B.sourceEndpoint(),Nt=B.targetEndpoint(),{sourceDir:St}=J(B),[wt,Gt]=N(St)?[It.x,Nt.y]:[Nt.x,It.y],{weights:zt,distances:Ht}=rt(It,Nt,wt,Gt);B.style("segment-distances",Ht),B.style("segment-weights",zt)}}U.endBatch(),k.run()}),k.run(),U.ready(rt=>{f.Rm.info("Ready",rt),$(U)})})}(0,y.pC)([{name:ut.prefix,icons:ut}]),d.A.use(t),(0,f.K2)(Ct,"addServices"),(0,f.K2)(Mt,"addJunctions"),(0,f.K2)(Rt,"positionNodes"),(0,f.K2)(Wt,"addGroups"),(0,f.K2)(Jt,"addEdges"),(0,f.K2)(bt,"getAlignments"),(0,f.K2)(Yt,"getRelativeConstraints"),(0,f.K2)(Xt,"layoutArchitecture");var q={parser:Pt,db:st,renderer:{draw:(0,f.K2)(function(){var v=(0,R.A)(function*(A,C,Z,G){const S=G.db,F=S.getServices(),$=S.getJunctions(),ot=S.getGroups(),U=S.getEdges(),at=S.getDataStructures(),H=(0,s.D)(C),k=H.append("g");k.attr("class","architecture-edges");const rt=H.append("g");rt.attr("class","architecture-services");const B=H.append("g");B.attr("class","architecture-groups"),yield Dt(S,rt,F),At(S,rt,$);const j=yield Xt(F,$,ot,U,S,at);yield gt(k,j),yield xt(B,j),Rt(S,j),(0,f.ot)(void 0,H,ft("padding"),ft("useMaxWidth"))});return function(A,C,Z,G){return v.apply(this,arguments)}}(),"draw")},styles:kt}},6148:function(ee){ee.exports=function(vt){var Et={};function R(y){if(Et[y])return Et[y].exports;var h=Et[y]={i:y,l:!1,exports:{}};return vt[y].call(h.exports,h,h.exports,R),h.l=!0,h.exports}return R.m=vt,R.c=Et,R.i=function(y){return y},R.d=function(y,h,o){R.o(y,h)||Object.defineProperty(y,h,{configurable:!1,enumerable:!0,get:o})},R.n=function(y){var h=y&&y.__esModule?function(){return y.default}:function(){return y};return R.d(h,"a",h),h},R.o=function(y,h){return Object.prototype.hasOwnProperty.call(y,h)},R.p="",R(R.s=28)}([function(vt,Et,R){"use strict";function y(){}y.QUALITY=1,y.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,y.DEFAULT_INCREMENTAL=!1,y.DEFAULT_ANIMATION_ON_LAYOUT=!0,y.DEFAULT_ANIMATION_DURING_LAYOUT=!1,y.DEFAULT_ANIMATION_PERIOD=50,y.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,y.DEFAULT_GRAPH_MARGIN=15,y.NODE_DIMENSIONS_INCLUDE_LABELS=!1,y.SIMPLE_NODE_HALF_SIZE=(y.SIMPLE_NODE_SIZE=40)/2,y.EMPTY_COMPOUND_NODE_SIZE=40,y.MIN_EDGE_LENGTH=1,y.INITIAL_WORLD_BOUNDARY=(y.WORLD_BOUNDARY=1e6)/1e3,y.WORLD_CENTER_X=1200,y.WORLD_CENTER_Y=900,vt.exports=y},function(vt,Et,R){"use strict";var y=R(2),h=R(8),o=R(9);function a(f,e,d){y.call(this,d),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=d,this.bendpoints=[],this.source=f,this.target=e}for(var s in a.prototype=Object.create(y.prototype),y)a[s]=y[s];a.prototype.getSource=function(){return this.source},a.prototype.getTarget=function(){return this.target},a.prototype.isInterGraph=function(){return this.isInterGraph},a.prototype.getLength=function(){return this.length},a.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},a.prototype.getBendpoints=function(){return this.bendpoints},a.prototype.getLca=function(){return this.lca},a.prototype.getSourceInLca=function(){return this.sourceInLca},a.prototype.getTargetInLca=function(){return this.targetInLca},a.prototype.getOtherEnd=function(f){if(this.source===f)return this.target;if(this.target===f)return this.source;throw"Node is not incident with this edge"},a.prototype.getOtherEndInGraph=function(f,e){for(var d=this.getOtherEnd(f),t=e.getGraphManager().getRoot();;){if(d.getOwner()==e)return d;if(d.getOwner()==t)break;d=d.getOwner().getParent()}return null},a.prototype.updateLength=function(){var f=new Array(4);this.isOverlapingSourceAndTarget=h.getIntersection(this.target.getRect(),this.source.getRect(),f),this.isOverlapingSourceAndTarget||(this.lengthX=f[0]-f[2],this.lengthY=f[1]-f[3],Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},a.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=o.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=o.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},vt.exports=a},function(vt,Et,R){"use strict";vt.exports=function y(h){this.vGraphObject=h}},function(vt,Et,R){"use strict";var y=R(2),h=R(10),o=R(13),a=R(0),s=R(16),f=R(5);function e(t,i,l,g){null==l&&null==g&&(g=i),y.call(this,g),null!=t.graphManager&&(t=t.graphManager),this.estimatedSize=h.MIN_VALUE,this.inclusionTreeDepth=h.MAX_VALUE,this.vGraphObject=g,this.edges=[],this.graphManager=t,this.rect=null!=l&&null!=i?new o(i.x,i.y,l.width,l.height):new o}for(var d in e.prototype=Object.create(y.prototype),y)e[d]=y[d];e.prototype.getEdges=function(){return this.edges},e.prototype.getChild=function(){return this.child},e.prototype.getOwner=function(){return this.owner},e.prototype.getWidth=function(){return this.rect.width},e.prototype.setWidth=function(t){this.rect.width=t},e.prototype.getHeight=function(){return this.rect.height},e.prototype.setHeight=function(t){this.rect.height=t},e.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},e.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},e.prototype.getCenter=function(){return new f(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},e.prototype.getLocation=function(){return new f(this.rect.x,this.rect.y)},e.prototype.getRect=function(){return this.rect},e.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},e.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},e.prototype.setRect=function(t,i){this.rect.x=t.x,this.rect.y=t.y,this.rect.width=i.width,this.rect.height=i.height},e.prototype.setCenter=function(t,i){this.rect.x=t-this.rect.width/2,this.rect.y=i-this.rect.height/2},e.prototype.setLocation=function(t,i){this.rect.x=t,this.rect.y=i},e.prototype.moveBy=function(t,i){this.rect.x+=t,this.rect.y+=i},e.prototype.getEdgeListToNode=function(t){var i=[],g=this;return g.edges.forEach(function(u){if(u.target==t){if(u.source!=g)throw"Incorrect edge source!";i.push(u)}}),i},e.prototype.getEdgesBetween=function(t){var i=[],g=this;return g.edges.forEach(function(u){if(u.source!=g&&u.target!=g)throw"Incorrect edge source and/or target";(u.target==t||u.source==t)&&i.push(u)}),i},e.prototype.getNeighborsList=function(){var t=new Set,i=this;return i.edges.forEach(function(l){if(l.source==i)t.add(l.target);else{if(l.target!=i)throw"Incorrect incidency!";t.add(l.source)}}),t},e.prototype.withChildren=function(){var t=new Set;if(t.add(this),null!=this.child)for(var g=this.child.getNodes(),u=0;u<g.length;u++)g[u].withChildren().forEach(function(T){t.add(T)});return t},e.prototype.getNoOfChildren=function(){var t=0;if(null==this.child)t=1;else for(var l=this.child.getNodes(),g=0;g<l.length;g++)t+=l[g].getNoOfChildren();return 0==t&&(t=1),t},e.prototype.getEstimatedSize=function(){if(this.estimatedSize==h.MIN_VALUE)throw"assert failed";return this.estimatedSize},e.prototype.calcEstimatedSize=function(){return null==this.child?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},e.prototype.scatter=function(){var t,i,l=-a.INITIAL_WORLD_BOUNDARY,g=a.INITIAL_WORLD_BOUNDARY;t=a.WORLD_CENTER_X+s.nextDouble()*(g-l)+l;var u=-a.INITIAL_WORLD_BOUNDARY,T=a.INITIAL_WORLD_BOUNDARY;i=a.WORLD_CENTER_Y+s.nextDouble()*(T-u)+u,this.rect.x=t,this.rect.y=i},e.prototype.updateBounds=function(){if(null==this.getChild())throw"assert failed";if(0!=this.getChild().getNodes().length){var t=this.getChild();if(t.updateBounds(!0),this.rect.x=t.getLeft(),this.rect.y=t.getTop(),this.setWidth(t.getRight()-t.getLeft()),this.setHeight(t.getBottom()-t.getTop()),a.NODE_DIMENSIONS_INCLUDE_LABELS){var i=t.getRight()-t.getLeft(),l=t.getBottom()-t.getTop();this.labelWidth&&("left"==this.labelPosHorizontal?(this.rect.x-=this.labelWidth,this.setWidth(i+this.labelWidth)):"center"==this.labelPosHorizontal&&this.labelWidth>i?(this.rect.x-=(this.labelWidth-i)/2,this.setWidth(this.labelWidth)):"right"==this.labelPosHorizontal&&this.setWidth(i+this.labelWidth)),this.labelHeight&&("top"==this.labelPosVertical?(this.rect.y-=this.labelHeight,this.setHeight(l+this.labelHeight)):"center"==this.labelPosVertical&&this.labelHeight>l?(this.rect.y-=(this.labelHeight-l)/2,this.setHeight(this.labelHeight)):"bottom"==this.labelPosVertical&&this.setHeight(l+this.labelHeight))}}},e.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==h.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},e.prototype.transform=function(t){var i=this.rect.x;i>a.WORLD_BOUNDARY?i=a.WORLD_BOUNDARY:i<-a.WORLD_BOUNDARY&&(i=-a.WORLD_BOUNDARY);var l=this.rect.y;l>a.WORLD_BOUNDARY?l=a.WORLD_BOUNDARY:l<-a.WORLD_BOUNDARY&&(l=-a.WORLD_BOUNDARY);var g=new f(i,l),u=t.inverseTransformPoint(g);this.setLocation(u.x,u.y)},e.prototype.getLeft=function(){return this.rect.x},e.prototype.getRight=function(){return this.rect.x+this.rect.width},e.prototype.getTop=function(){return this.rect.y},e.prototype.getBottom=function(){return this.rect.y+this.rect.height},e.prototype.getParent=function(){return null==this.owner?null:this.owner.getParent()},vt.exports=e},function(vt,Et,R){"use strict";var y=R(0);function h(){}for(var o in y)h[o]=y[o];h.MAX_ITERATIONS=2500,h.DEFAULT_EDGE_LENGTH=50,h.DEFAULT_SPRING_STRENGTH=.45,h.DEFAULT_REPULSION_STRENGTH=4500,h.DEFAULT_GRAVITY_STRENGTH=.4,h.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,h.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,h.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,h.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,h.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,h.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,h.COOLING_ADAPTATION_FACTOR=.33,h.ADAPTATION_LOWER_NODE_LIMIT=1e3,h.ADAPTATION_UPPER_NODE_LIMIT=5e3,h.MAX_NODE_DISPLACEMENT=3*(h.MAX_NODE_DISPLACEMENT_INCREMENTAL=100),h.MIN_REPULSION_DIST=h.DEFAULT_EDGE_LENGTH/10,h.CONVERGENCE_CHECK_PERIOD=100,h.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,h.MIN_EDGE_LENGTH=1,h.GRID_CALCULATION_CHECK_PERIOD=10,vt.exports=h},function(vt,Et,R){"use strict";function y(h,o){null==h&&null==o?(this.x=0,this.y=0):(this.x=h,this.y=o)}y.prototype.getX=function(){return this.x},y.prototype.getY=function(){return this.y},y.prototype.setX=function(h){this.x=h},y.prototype.setY=function(h){this.y=h},y.prototype.getDifference=function(h){return new DimensionD(this.x-h.x,this.y-h.y)},y.prototype.getCopy=function(){return new y(this.x,this.y)},y.prototype.translate=function(h){return this.x+=h.width,this.y+=h.height,this},vt.exports=y},function(vt,Et,R){"use strict";var y=R(2),h=R(10),o=R(0),a=R(7),s=R(3),f=R(1),e=R(13),d=R(12),t=R(11);function i(g,u,T){y.call(this,T),this.estimatedSize=h.MIN_VALUE,this.margin=o.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=g,null!=u&&u instanceof a?this.graphManager=u:null!=u&&u instanceof Layout&&(this.graphManager=u.graphManager)}for(var l in i.prototype=Object.create(y.prototype),y)i[l]=y[l];i.prototype.getNodes=function(){return this.nodes},i.prototype.getEdges=function(){return this.edges},i.prototype.getGraphManager=function(){return this.graphManager},i.prototype.getParent=function(){return this.parent},i.prototype.getLeft=function(){return this.left},i.prototype.getRight=function(){return this.right},i.prototype.getTop=function(){return this.top},i.prototype.getBottom=function(){return this.bottom},i.prototype.isConnected=function(){return this.isConnected},i.prototype.add=function(g,u,T){if(null==u&&null==T){var c=g;if(null==this.graphManager)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(c)>-1)throw"Node already in graph!";return c.owner=this,this.getNodes().push(c),c}var M=g;if(!(this.getNodes().indexOf(u)>-1&&this.getNodes().indexOf(T)>-1))throw"Source or target not in graph!";if(u.owner!=T.owner||u.owner!=this)throw"Both owners must be this graph!";return u.owner!=T.owner?null:(M.source=u,M.target=T,M.isInterGraph=!1,this.getEdges().push(M),u.edges.push(M),T!=u&&T.edges.push(M),M)},i.prototype.remove=function(g){var u=g;if(g instanceof s){if(null==u)throw"Node is null!";if(null==u.owner||u.owner!=this)throw"Owner graph is invalid!";if(null==this.graphManager)throw"Owner graph manager is invalid!";for(var T=u.edges.slice(),M=T.length,N=0;N<M;N++)(c=T[N]).isInterGraph?this.graphManager.remove(c):c.source.owner.remove(c);if(-1==(L=this.nodes.indexOf(u)))throw"Node not in owner node list!";this.nodes.splice(L,1)}else if(g instanceof f){var c;if(null==(c=g))throw"Edge is null!";if(null==c.source||null==c.target)throw"Source and/or target is null!";if(null==c.source.owner||null==c.target.owner||c.source.owner!=this||c.target.owner!=this)throw"Source and/or target owner is invalid!";var L,D=c.source.edges.indexOf(c),et=c.target.edges.indexOf(c);if(!(D>-1&&et>-1))throw"Source and/or target doesn't know this edge!";if(c.source.edges.splice(D,1),c.target!=c.source&&c.target.edges.splice(et,1),-1==(L=c.source.owner.getEdges().indexOf(c)))throw"Not in owner's edge list!";c.source.owner.getEdges().splice(L,1)}},i.prototype.updateLeftTop=function(){for(var T,c,M,g=h.MAX_VALUE,u=h.MAX_VALUE,N=this.getNodes(),L=N.length,D=0;D<L;D++){var et=N[D];g>(T=et.getTop())&&(g=T),u>(c=et.getLeft())&&(u=c)}return g==h.MAX_VALUE?null:(M=null!=N[0].getParent().paddingLeft?N[0].getParent().paddingLeft:this.margin,this.left=u-M,this.top=g-M,new d(this.left,this.top))},i.prototype.updateBounds=function(g){for(var N,L,D,et,x,u=h.MAX_VALUE,T=-h.MAX_VALUE,c=h.MAX_VALUE,M=-h.MAX_VALUE,nt=this.nodes,dt=nt.length,ct=0;ct<dt;ct++){var mt=nt[ct];g&&null!=mt.child&&mt.updateBounds(),u>(N=mt.getLeft())&&(u=N),T<(L=mt.getRight())&&(T=L),c>(D=mt.getTop())&&(c=D),M<(et=mt.getBottom())&&(M=et)}var P=new e(u,c,T-u,M-c);u==h.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),x=null!=nt[0].getParent().paddingLeft?nt[0].getParent().paddingLeft:this.margin,this.left=P.x-x,this.right=P.x+P.width+x,this.top=P.y-x,this.bottom=P.y+P.height+x},i.calculateBounds=function(g){for(var N,L,D,et,u=h.MAX_VALUE,T=-h.MAX_VALUE,c=h.MAX_VALUE,M=-h.MAX_VALUE,x=g.length,nt=0;nt<x;nt++){var dt=g[nt];u>(N=dt.getLeft())&&(u=N),T<(L=dt.getRight())&&(T=L),c>(D=dt.getTop())&&(c=D),M<(et=dt.getBottom())&&(M=et)}return new e(u,c,T-u,M-c)},i.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},i.prototype.getEstimatedSize=function(){if(this.estimatedSize==h.MIN_VALUE)throw"assert failed";return this.estimatedSize},i.prototype.calcEstimatedSize=function(){for(var g=0,u=this.nodes,T=u.length,c=0;c<T;c++)g+=u[c].calcEstimatedSize();return this.estimatedSize=0==g?o.EMPTY_COMPOUND_NODE_SIZE:g/Math.sqrt(this.nodes.length),this.estimatedSize},i.prototype.updateConnected=function(){var g=this;if(0!=this.nodes.length){var M,N,u=new t,T=new Set,c=this.nodes[0];for(c.withChildren().forEach(function(ct){u.push(ct),T.add(ct)});0!==u.length;)for(var D=(M=(c=u.shift()).getEdges()).length,et=0;et<D;et++)null==(N=M[et].getOtherEndInGraph(c,this))||T.has(N)||N.withChildren().forEach(function(ct){u.push(ct),T.add(ct)});if(this.isConnected=!1,T.size>=this.nodes.length){var dt=0;T.forEach(function(ct){ct.owner==g&&dt++}),dt==this.nodes.length&&(this.isConnected=!0)}}else this.isConnected=!0},vt.exports=i},function(vt,Et,R){"use strict";var y,h=R(1);function o(a){y=R(6),this.layout=a,this.graphs=[],this.edges=[]}o.prototype.addRoot=function(){var a=this.layout.newGraph(),s=this.layout.newNode(null),f=this.add(a,s);return this.setRootGraph(f),this.rootGraph},o.prototype.add=function(a,s,f,e,d){if(null==f&&null==e&&null==d){if(null==a)throw"Graph is null!";if(null==s)throw"Parent node is null!";if(this.graphs.indexOf(a)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(a),null!=a.parent)throw"Already has a parent!";if(null!=s.child)throw"Already has a child!";return a.parent=s,s.child=a,a}d=f,f=a;var t=(e=s).getOwner(),i=d.getOwner();if(null==t||t.getGraphManager()!=this)throw"Source not in this graph mgr!";if(null==i||i.getGraphManager()!=this)throw"Target not in this graph mgr!";if(t==i)return f.isInterGraph=!1,t.add(f,e,d);if(f.isInterGraph=!0,f.source=e,f.target=d,this.edges.indexOf(f)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(f),null==f.source||null==f.target)throw"Edge source and/or target is null!";if(-1!=f.source.edges.indexOf(f)||-1!=f.target.edges.indexOf(f))throw"Edge already in source and/or target incidency list!";return f.source.edges.push(f),f.target.edges.push(f),f},o.prototype.remove=function(a){if(a instanceof y){var s=a;if(s.getGraphManager()!=this)throw"Graph not in this graph mgr";if(s!=this.rootGraph&&(null==s.parent||s.parent.graphManager!=this))throw"Invalid parent node!";for(var e,f=[],d=(f=f.concat(s.getEdges())).length,t=0;t<d;t++)s.remove(e=f[t]);var i=[];for(d=(i=i.concat(s.getNodes())).length,t=0;t<d;t++)s.remove(i[t]);s==this.rootGraph&&this.setRootGraph(null);var g=this.graphs.indexOf(s);this.graphs.splice(g,1),s.parent=null}else if(a instanceof h){if(null==(e=a))throw"Edge is null!";if(!e.isInterGraph)throw"Not an inter-graph edge!";if(null==e.source||null==e.target)throw"Source and/or target is null!";if(-1==e.source.edges.indexOf(e)||-1==e.target.edges.indexOf(e))throw"Source and/or target doesn't know this edge!";if(g=e.source.edges.indexOf(e),e.source.edges.splice(g,1),g=e.target.edges.indexOf(e),e.target.edges.splice(g,1),null==e.source.owner||null==e.source.owner.getGraphManager())throw"Edge owner graph or owner graph manager is null!";if(-1==e.source.owner.getGraphManager().edges.indexOf(e))throw"Not in owner graph manager's edge list!";g=e.source.owner.getGraphManager().edges.indexOf(e),e.source.owner.getGraphManager().edges.splice(g,1)}},o.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},o.prototype.getGraphs=function(){return this.graphs},o.prototype.getAllNodes=function(){if(null==this.allNodes){for(var a=[],s=this.getGraphs(),f=s.length,e=0;e<f;e++)a=a.concat(s[e].getNodes());this.allNodes=a}return this.allNodes},o.prototype.resetAllNodes=function(){this.allNodes=null},o.prototype.resetAllEdges=function(){this.allEdges=null},o.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},o.prototype.getAllEdges=function(){if(null==this.allEdges){for(var a=[],s=this.getGraphs(),e=0;e<s.length;e++)a=a.concat(s[e].getEdges());a=a.concat(this.edges),this.allEdges=a}return this.allEdges},o.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},o.prototype.setAllNodesToApplyGravitation=function(a){if(null!=this.allNodesToApplyGravitation)throw"assert failed";this.allNodesToApplyGravitation=a},o.prototype.getRoot=function(){return this.rootGraph},o.prototype.setRootGraph=function(a){if(a.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=a,null==a.parent&&(a.parent=this.layout.newNode("Root node"))},o.prototype.getLayout=function(){return this.layout},o.prototype.isOneAncestorOfOther=function(a,s){if(null==a||null==s)throw"assert failed";if(a==s)return!0;for(var e,f=a.getOwner();null!=(e=f.getParent());){if(e==s)return!0;if(null==(f=e.getOwner()))break}for(f=s.getOwner();null!=(e=f.getParent());){if(e==a)return!0;if(null==(f=e.getOwner()))break}return!1},o.prototype.calcLowestCommonAncestors=function(){for(var a,s,f,e,d,t=this.getAllEdges(),i=t.length,l=0;l<i;l++)if(s=(a=t[l]).source,f=a.target,a.lca=null,a.sourceInLca=s,a.targetInLca=f,s!=f){for(e=s.getOwner();null==a.lca;){for(a.targetInLca=f,d=f.getOwner();null==a.lca;){if(d==e){a.lca=d;break}if(d==this.rootGraph)break;if(null!=a.lca)throw"assert failed";a.targetInLca=d.getParent(),d=a.targetInLca.getOwner()}if(e==this.rootGraph)break;null==a.lca&&(a.sourceInLca=e.getParent(),e=a.sourceInLca.getOwner())}if(null==a.lca)throw"assert failed"}else a.lca=s.getOwner()},o.prototype.calcLowestCommonAncestor=function(a,s){if(a==s)return a.getOwner();for(var f=a.getOwner();null!=f;){for(var e=s.getOwner();null!=e;){if(e==f)return e;e=e.getParent().getOwner()}f=f.getParent().getOwner()}return f},o.prototype.calcInclusionTreeDepths=function(a,s){null==a&&null==s&&(a=this.rootGraph,s=1);for(var f,e=a.getNodes(),d=e.length,t=0;t<d;t++)(f=e[t]).inclusionTreeDepth=s,null!=f.child&&this.calcInclusionTreeDepths(f.child,s+1)},o.prototype.includesInvalidEdge=function(){for(var a,s=[],f=this.edges.length,e=0;e<f;e++)this.isOneAncestorOfOther((a=this.edges[e]).source,a.target)&&s.push(a);for(e=0;e<s.length;e++)this.remove(s[e]);return!1},vt.exports=o},function(vt,Et,R){"use strict";var y=R(12);function h(){}h.calcSeparationAmount=function(o,a,s,f){if(!o.intersects(a))throw"assert failed";var e=new Array(2);this.decideDirectionsForOverlappingNodes(o,a,e),s[0]=Math.min(o.getRight(),a.getRight())-Math.max(o.x,a.x),s[1]=Math.min(o.getBottom(),a.getBottom())-Math.max(o.y,a.y),o.getX()<=a.getX()&&o.getRight()>=a.getRight()?s[0]+=Math.min(a.getX()-o.getX(),o.getRight()-a.getRight()):a.getX()<=o.getX()&&a.getRight()>=o.getRight()&&(s[0]+=Math.min(o.getX()-a.getX(),a.getRight()-o.getRight())),o.getY()<=a.getY()&&o.getBottom()>=a.getBottom()?s[1]+=Math.min(a.getY()-o.getY(),o.getBottom()-a.getBottom()):a.getY()<=o.getY()&&a.getBottom()>=o.getBottom()&&(s[1]+=Math.min(o.getY()-a.getY(),a.getBottom()-o.getBottom()));var d=Math.abs((a.getCenterY()-o.getCenterY())/(a.getCenterX()-o.getCenterX()));a.getCenterY()===o.getCenterY()&&a.getCenterX()===o.getCenterX()&&(d=1);var t=d*s[0],i=s[1]/d;s[0]<i?i=s[0]:t=s[1],s[0]=-1*e[0]*(i/2+f),s[1]=-1*e[1]*(t/2+f)},h.decideDirectionsForOverlappingNodes=function(o,a,s){s[0]=o.getCenterX()<a.getCenterX()?-1:1,s[1]=o.getCenterY()<a.getCenterY()?-1:1},h.getIntersection2=function(o,a,s){var f=o.getCenterX(),e=o.getCenterY(),d=a.getCenterX(),t=a.getCenterY();if(o.intersects(a))return s[0]=f,s[1]=e,s[2]=d,s[3]=t,!0;var i=o.getX(),l=o.getY(),g=o.getRight(),u=o.getX(),T=o.getBottom(),c=o.getRight(),M=o.getWidthHalf(),N=o.getHeightHalf(),L=a.getX(),D=a.getY(),et=a.getRight(),x=a.getX(),nt=a.getBottom(),dt=a.getRight(),ct=a.getWidthHalf(),mt=a.getHeightHalf(),P=!1,J=!1;if(f===d){if(e>t)return s[0]=f,s[1]=l,s[2]=d,s[3]=nt,!1;if(e<t)return s[0]=f,s[1]=T,s[2]=d,s[3]=D,!1}else if(e===t){if(f>d)return s[0]=i,s[1]=e,s[2]=et,s[3]=t,!1;if(f<d)return s[0]=g,s[1]=e,s[2]=L,s[3]=t,!1}else{var r=o.height/o.width,m=a.height/a.width,n=(t-e)/(d-f),E=void 0,p=void 0,w=void 0,Y=void 0;if(-r===n?f>d?(s[0]=u,s[1]=T,P=!0):(s[0]=g,s[1]=l,P=!0):r===n&&(f>d?(s[0]=i,s[1]=l,P=!0):(s[0]=c,s[1]=T,P=!0)),-m===n?d>f?(s[2]=x,s[3]=nt,J=!0):(s[2]=et,s[3]=D,J=!0):m===n&&(d>f?(s[2]=L,s[3]=D,J=!0):(s[2]=dt,s[3]=nt,J=!0)),P&&J)return!1;if(f>d?e>t?(E=this.getCardinalDirection(r,n,4),p=this.getCardinalDirection(m,n,2)):(E=this.getCardinalDirection(-r,n,3),p=this.getCardinalDirection(-m,n,1)):e>t?(E=this.getCardinalDirection(-r,n,1),p=this.getCardinalDirection(-m,n,3)):(E=this.getCardinalDirection(r,n,2),p=this.getCardinalDirection(m,n,4)),!P)switch(E){case 1:w=l,s[0]=f+-N/n,s[1]=w;break;case 2:w=e+M*n,s[0]=c,s[1]=w;break;case 3:w=T,s[0]=f+N/n,s[1]=w;break;case 4:w=e+-M*n,s[0]=u,s[1]=w}if(!J)switch(p){case 1:Y=D,s[2]=d+-mt/n,s[3]=Y;break;case 2:Y=t+ct*n,s[2]=dt,s[3]=Y;break;case 3:Y=nt,s[2]=d+mt/n,s[3]=Y;break;case 4:Y=t+-ct*n,s[2]=x,s[3]=Y}}return!1},h.getCardinalDirection=function(o,a,s){return o>a?s:1+s%4},h.getIntersection=function(o,a,s,f){if(null==f)return this.getIntersection2(o,a,s);var N,L,D,et,x,nt,dt,e=o.x,d=o.y,t=a.x,i=a.y,l=s.x,g=s.y,u=f.x,T=f.y;return x=t*d-e*i,nt=u*g-l*T,0==(dt=(N=i-d)*(et=l-u)-(L=T-g)*(D=e-t))?null:new y((D*nt-et*x)/dt,(L*x-N*nt)/dt)},h.angleOfVector=function(o,a,s,f){var e=void 0;return o!==s?(e=Math.atan((f-a)/(s-o)),s<o?e+=Math.PI:f<a&&(e+=this.TWO_PI)):e=f<a?this.ONE_AND_HALF_PI:this.HALF_PI,e},h.doIntersect=function(o,a,s,f){var e=o.x,d=o.y,t=a.x,i=a.y,l=s.x,g=s.y,u=f.x,T=f.y,c=(t-e)*(T-g)-(u-l)*(i-d);if(0===c)return!1;var M=((T-g)*(u-e)+(l-u)*(T-d))/c,N=((d-i)*(u-e)+(t-e)*(T-d))/c;return 0<M&&M<1&&0<N&&N<1},h.findCircleLineIntersections=function(o,a,s,f,e,d,t){var i=(s-o)*(s-o)+(f-a)*(f-a),l=2*((o-e)*(s-o)+(a-d)*(f-a)),g=(o-e)*(o-e)+(a-d)*(a-d)-t*t;if(l*l-4*i*g>=0){var T=(-l+Math.sqrt(l*l-4*i*g))/(2*i),c=(-l-Math.sqrt(l*l-4*i*g))/(2*i);return T>=0&&T<=1?[T]:c>=0&&c<=1?[c]:null}return null},h.HALF_PI=.5*Math.PI,h.ONE_AND_HALF_PI=1.5*Math.PI,h.TWO_PI=2*Math.PI,h.THREE_PI=3*Math.PI,vt.exports=h},function(vt,Et,R){"use strict";function y(){}y.sign=function(h){return h>0?1:h<0?-1:0},y.floor=function(h){return h<0?Math.ceil(h):Math.floor(h)},y.ceil=function(h){return h<0?Math.floor(h):Math.ceil(h)},vt.exports=y},function(vt,Et,R){"use strict";function y(){}y.MAX_VALUE=2147483647,y.MIN_VALUE=-2147483648,vt.exports=y},function(vt,Et,R){"use strict";var y=function(){function e(d,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(d,l.key,l)}}return function(d,t,i){return t&&e(d.prototype,t),i&&e(d,i),d}}();var o=function(d){return{value:d,next:null,prev:null}},a=function(d,t,i,l){return null!==d?d.next=t:l.head=t,null!==i?i.prev=t:l.tail=t,t.prev=d,t.next=i,l.length++,t},s=function(d,t){var i=d.prev,l=d.next;return null!==i?i.next=l:t.head=l,null!==l?l.prev=i:t.tail=i,d.prev=d.next=null,t.length--,d},f=function(){function e(d){var t=this;(function h(e,d){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")})(this,e),this.length=0,this.head=null,this.tail=null,d?.forEach(function(i){return t.push(i)})}return y(e,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(t,i){return a(i.prev,o(t),i,this)}},{key:"insertAfter",value:function(t,i){return a(i,o(t),i.next,this)}},{key:"insertNodeBefore",value:function(t,i){return a(i.prev,t,i,this)}},{key:"insertNodeAfter",value:function(t,i){return a(i,t,i.next,this)}},{key:"push",value:function(t){return a(this.tail,o(t),null,this)}},{key:"unshift",value:function(t){return a(null,o(t),this.head,this)}},{key:"remove",value:function(t){return s(t,this)}},{key:"pop",value:function(){return s(this.tail,this).value}},{key:"popNode",value:function(){return s(this.tail,this)}},{key:"shift",value:function(){return s(this.head,this).value}},{key:"shiftNode",value:function(){return s(this.head,this)}},{key:"get_object_at",value:function(t){if(t<=this.length()){for(var i=1,l=this.head;i<t;)l=l.next,i++;return l.value}}},{key:"set_object_at",value:function(t,i){if(t<=this.length()){for(var l=1,g=this.head;l<t;)g=g.next,l++;g.value=i}}}]),e}();vt.exports=f},function(vt,Et,R){"use strict";function y(h,o,a){this.x=null,this.y=null,null==h&&null==o&&null==a?(this.x=0,this.y=0):"number"==typeof h&&"number"==typeof o&&null==a?(this.x=h,this.y=o):"Point"==h.constructor.name&&null==o&&null==a&&(this.x=(a=h).x,this.y=a.y)}y.prototype.getX=function(){return this.x},y.prototype.getY=function(){return this.y},y.prototype.getLocation=function(){return new y(this.x,this.y)},y.prototype.setLocation=function(h,o,a){"Point"==h.constructor.name&&null==o&&null==a?this.setLocation((a=h).x,a.y):"number"==typeof h&&"number"==typeof o&&null==a&&(parseInt(h)==h&&parseInt(o)==o?this.move(h,o):(this.x=Math.floor(h+.5),this.y=Math.floor(o+.5)))},y.prototype.move=function(h,o){this.x=h,this.y=o},y.prototype.translate=function(h,o){this.x+=h,this.y+=o},y.prototype.equals=function(h){return"Point"==h.constructor.name?this.x==h.x&&this.y==h.y:this==h},y.prototype.toString=function(){return(new y).constructor.name+"[x="+this.x+",y="+this.y+"]"},vt.exports=y},function(vt,Et,R){"use strict";function y(h,o,a,s){this.x=0,this.y=0,this.width=0,this.height=0,null!=h&&null!=o&&null!=a&&null!=s&&(this.x=h,this.y=o,this.width=a,this.height=s)}y.prototype.getX=function(){return this.x},y.prototype.setX=function(h){this.x=h},y.prototype.getY=function(){return this.y},y.prototype.setY=function(h){this.y=h},y.prototype.getWidth=function(){return this.width},y.prototype.setWidth=function(h){this.width=h},y.prototype.getHeight=function(){return this.height},y.prototype.setHeight=function(h){this.height=h},y.prototype.getRight=function(){return this.x+this.width},y.prototype.getBottom=function(){return this.y+this.height},y.prototype.intersects=function(h){return!(this.getRight()<h.x||this.getBottom()<h.y||h.getRight()<this.x||h.getBottom()<this.y)},y.prototype.getCenterX=function(){return this.x+this.width/2},y.prototype.getMinX=function(){return this.getX()},y.prototype.getMaxX=function(){return this.getX()+this.width},y.prototype.getCenterY=function(){return this.y+this.height/2},y.prototype.getMinY=function(){return this.getY()},y.prototype.getMaxY=function(){return this.getY()+this.height},y.prototype.getWidthHalf=function(){return this.width/2},y.prototype.getHeightHalf=function(){return this.height/2},vt.exports=y},function(vt,Et,R){"use strict";var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o};function h(){}h.lastID=0,h.createID=function(o){return h.isPrimitive(o)?o:(null!=o.uniqueID||(o.uniqueID=h.getString(),h.lastID++),o.uniqueID)},h.getString=function(o){return null==o&&(o=h.lastID),"Object#"+o},h.isPrimitive=function(o){var a=typeof o>"u"?"undefined":y(o);return null==o||"object"!=a&&"function"!=a},vt.exports=h},function(vt,Et,R){"use strict";function y(l){if(Array.isArray(l)){for(var g=0,u=Array(l.length);g<l.length;g++)u[g]=l[g];return u}return Array.from(l)}var h=R(0),o=R(7),a=R(3),s=R(1),f=R(6),e=R(5),d=R(17),t=R(29);function i(l){t.call(this),this.layoutQuality=h.QUALITY,this.createBendsAsNeeded=h.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=h.DEFAULT_INCREMENTAL,this.animationOnLayout=h.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=h.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=h.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=h.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new o(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,null!=l&&(this.isRemoteUse=l)}i.RANDOM_SEED=1,(i.prototype=Object.create(t.prototype)).getGraphManager=function(){return this.graphManager},i.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},i.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},i.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},i.prototype.newGraphManager=function(){var l=new o(this);return this.graphManager=l,l},i.prototype.newGraph=function(l){return new f(null,this.graphManager,l)},i.prototype.newNode=function(l){return new a(this.graphManager,l)},i.prototype.newEdge=function(l){return new s(null,null,l)},i.prototype.checkLayoutSuccess=function(){return null==this.graphManager.getRoot()||0==this.graphManager.getRoot().getNodes().length||this.graphManager.includesInvalidEdge()},i.prototype.runLayout=function(){var l;return this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters(),l=!this.checkLayoutSuccess()&&this.layout(),"during"!==h.ANIMATE&&(l&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,l)},i.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},i.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var g=this.graphManager.getAllEdges(),u=0;u<g.length;u++);var c=this.graphManager.getRoot().getNodes();for(u=0;u<c.length;u++);this.update(this.graphManager.getRoot())}},i.prototype.update=function(l){if(null==l)this.update2();else if(l instanceof a){var g=l;if(null!=g.getChild())for(var u=g.getChild().getNodes(),T=0;T<u.length;T++)update(u[T]);null!=g.vGraphObject&&g.vGraphObject.update(g)}else l instanceof s?null!=l.vGraphObject&&l.vGraphObject.update(l):l instanceof f&&null!=l.vGraphObject&&l.vGraphObject.update(l)},i.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=h.QUALITY,this.animationDuringLayout=h.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=h.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=h.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=h.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=h.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=h.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},i.prototype.transform=function(l){if(null==l)this.transform(new e(0,0));else{var g=new d,u=this.graphManager.getRoot().updateLeftTop();if(null!=u){g.setWorldOrgX(l.x),g.setWorldOrgY(l.y),g.setDeviceOrgX(u.x),g.setDeviceOrgY(u.y);for(var T=this.getAllNodes(),M=0;M<T.length;M++)T[M].transform(g)}}},i.prototype.positionNodesRandomly=function(l){if(null==l)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var g,u,T=l.getNodes(),c=0;c<T.length;c++)null==(u=(g=T[c]).getChild())||0==u.getNodes().length?g.scatter():(this.positionNodesRandomly(u),g.updateBounds())},i.prototype.getFlatForest=function(){for(var l=[],g=!0,u=this.graphManager.getRoot().getNodes(),T=!0,c=0;c<u.length;c++)null!=u[c].getChild()&&(T=!1);if(!T)return l;var M=new Set,N=[],L=new Map,D=[];for(D=D.concat(u);D.length>0&&g;){for(N.push(D[0]);N.length>0&&g;){var et=N[0];N.splice(0,1),M.add(et);var x=et.getEdges();for(c=0;c<x.length;c++){var nt=x[c].getOtherEnd(et);if(L.get(et)!=nt){if(M.has(nt)){g=!1;break}N.push(nt),L.set(nt,et)}}}if(g){var dt=[].concat(y(M));for(l.push(dt),c=0;c<dt.length;c++){var mt=D.indexOf(dt[c]);mt>-1&&D.splice(mt,1)}M=new Set,L=new Map}else l=[]}return l},i.prototype.createDummyNodesForBendpoints=function(l){for(var g=[],u=l.source,T=this.graphManager.calcLowestCommonAncestor(l.source,l.target),c=0;c<l.bendpoints.length;c++){var M=this.newNode(null);M.setRect(new Point(0,0),new Dimension(1,1)),T.add(M);var N=this.newEdge(null);this.graphManager.add(N,u,M),g.add(M),u=M}return N=this.newEdge(null),this.graphManager.add(N,u,l.target),this.edgeToDummyNodes.set(l,g),l.isInterGraph()?this.graphManager.remove(l):T.remove(l),g},i.prototype.createBendpointsFromDummyNodes=function(){var l=[];l=l.concat(this.graphManager.getAllEdges()),l=[].concat(y(this.edgeToDummyNodes.keys())).concat(l);for(var g=0;g<l.length;g++){var u=l[g];if(u.bendpoints.length>0){for(var T=this.edgeToDummyNodes.get(u),c=0;c<T.length;c++){var M=T[c],N=new e(M.getCenterX(),M.getCenterY()),L=u.bendpoints.get(c);L.x=N.x,L.y=N.y,M.getOwner().remove(M)}this.graphManager.add(u,u.source,u.target)}}},i.transform=function(l,g,u,T){if(null!=u&&null!=T){var c=g;return l<=50?c-=(g-g/u)/50*(50-l):c+=(g*T-g)/50*(l-50),c}var L,D;return l<=50?(L=9*g/500,D=g/10):(L=9*g/50,D=-8*g),L*l+D},i.findCenterOfTree=function(l){var g=[];g=g.concat(l);var u=[],T=new Map,c=!1,M=null;(1==g.length||2==g.length)&&(c=!0,M=g[0]);for(var N=0;N<g.length;N++){var D=(L=g[N]).getNeighborsList().size;T.set(L,L.getNeighborsList().size),1==D&&u.push(L)}var et=[];for(et=et.concat(u);!c;){var x=[];for(x=x.concat(et),et=[],N=0;N<g.length;N++){var L,nt=g.indexOf(L=g[N]);nt>=0&&g.splice(nt,1),L.getNeighborsList().forEach(function(P){if(u.indexOf(P)<0){var r=T.get(P)-1;1==r&&et.push(P),T.set(P,r)}})}u=u.concat(et),(1==g.length||2==g.length)&&(c=!0,M=g[0])}return M},i.prototype.setGraphManager=function(l){this.graphManager=l},vt.exports=i},function(vt,Et,R){"use strict";function y(){}y.seed=1,y.x=0,y.nextDouble=function(){return(y.x=1e4*Math.sin(y.seed++))-Math.floor(y.x)},vt.exports=y},function(vt,Et,R){"use strict";var y=R(5);function h(o,a){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}h.prototype.getWorldOrgX=function(){return this.lworldOrgX},h.prototype.setWorldOrgX=function(o){this.lworldOrgX=o},h.prototype.getWorldOrgY=function(){return this.lworldOrgY},h.prototype.setWorldOrgY=function(o){this.lworldOrgY=o},h.prototype.getWorldExtX=function(){return this.lworldExtX},h.prototype.setWorldExtX=function(o){this.lworldExtX=o},h.prototype.getWorldExtY=function(){return this.lworldExtY},h.prototype.setWorldExtY=function(o){this.lworldExtY=o},h.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},h.prototype.setDeviceOrgX=function(o){this.ldeviceOrgX=o},h.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},h.prototype.setDeviceOrgY=function(o){this.ldeviceOrgY=o},h.prototype.getDeviceExtX=function(){return this.ldeviceExtX},h.prototype.setDeviceExtX=function(o){this.ldeviceExtX=o},h.prototype.getDeviceExtY=function(){return this.ldeviceExtY},h.prototype.setDeviceExtY=function(o){this.ldeviceExtY=o},h.prototype.transformX=function(o){var a=0,s=this.lworldExtX;return 0!=s&&(a=this.ldeviceOrgX+(o-this.lworldOrgX)*this.ldeviceExtX/s),a},h.prototype.transformY=function(o){var a=0,s=this.lworldExtY;return 0!=s&&(a=this.ldeviceOrgY+(o-this.lworldOrgY)*this.ldeviceExtY/s),a},h.prototype.inverseTransformX=function(o){var a=0,s=this.ldeviceExtX;return 0!=s&&(a=this.lworldOrgX+(o-this.ldeviceOrgX)*this.lworldExtX/s),a},h.prototype.inverseTransformY=function(o){var a=0,s=this.ldeviceExtY;return 0!=s&&(a=this.lworldOrgY+(o-this.ldeviceOrgY)*this.lworldExtY/s),a},h.prototype.inverseTransformPoint=function(o){return new y(this.inverseTransformX(o.x),this.inverseTransformY(o.y))},vt.exports=h},function(vt,Et,R){"use strict";var h=R(15),o=R(4),a=R(0),s=R(8),f=R(9);function e(){h.call(this),this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=o.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=o.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=o.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=o.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=o.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=o.MAX_ITERATIONS}for(var d in e.prototype=Object.create(h.prototype),h)e[d]=h[d];e.prototype.initParameters=function(){h.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=o.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},e.prototype.calcIdealEdgeLengths=function(){for(var t,i,l,g,u,T,c,M=this.getGraphManager().getAllEdges(),N=0;N<M.length;N++)i=(t=M[N]).idealLength,t.isInterGraph&&(g=t.getSource(),u=t.getTarget(),T=t.getSourceInLca().getEstimatedSize(),c=t.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(t.idealLength+=T+c-2*a.SIMPLE_NODE_SIZE),l=t.getLca().getInclusionTreeDepth(),t.idealLength+=i*o.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(g.getInclusionTreeDepth()+u.getInclusionTreeDepth()-2*l))},e.prototype.initSpringEmbedder=function(){var t=this.getAllNodes().length;this.incremental?(t>o.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*o.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(t-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-o.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT_INCREMENTAL):(this.coolingFactor=t>o.ADAPTATION_LOWER_NODE_LIMIT?Math.max(o.COOLING_ADAPTATION_FACTOR,1-(t-o.ADAPTATION_LOWER_NODE_LIMIT)/(o.ADAPTATION_UPPER_NODE_LIMIT-o.ADAPTATION_LOWER_NODE_LIMIT)*(1-o.COOLING_ADAPTATION_FACTOR)):1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=o.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(5*this.getAllNodes().length,this.maxIterations),this.displacementThresholdPerNode=3*o.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},e.prototype.calcSpringForces=function(){for(var i,t=this.getAllEdges(),l=0;l<t.length;l++)this.calcSpringForce(i=t[l],i.idealLength)},e.prototype.calcRepulsionForces=function(){var l,g,u,T,M,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=this.getAllNodes();if(this.useFRGridVariant)for(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&t&&this.updateGrid(),M=new Set,l=0;l<c.length;l++)this.calculateRepulsionForceOfANode(u=c[l],M,t,i),M.add(u);else for(l=0;l<c.length;l++)for(u=c[l],g=l+1;g<c.length;g++)T=c[g],u.getOwner()==T.getOwner()&&this.calcRepulsionForce(u,T)},e.prototype.calcGravitationalForces=function(){for(var i=this.getAllNodesToApplyGravitation(),l=0;l<i.length;l++)this.calcGravitationalForce(i[l])},e.prototype.moveNodes=function(){for(var t=this.getAllNodes(),l=0;l<t.length;l++)t[l].move()},e.prototype.calcSpringForce=function(t,i){var u,T,c,M,l=t.getSource(),g=t.getTarget();if(this.uniformLeafNodeSizes&&null==l.getChild()&&null==g.getChild())t.updateLengthSimple();else if(t.updateLength(),t.isOverlapingSourceAndTarget)return;0!=(u=t.getLength())&&(M=(T=t.edgeElasticity*(u-i))*(t.lengthY/u),l.springForceX+=c=T*(t.lengthX/u),l.springForceY+=M,g.springForceX-=c,g.springForceY-=M)},e.prototype.calcRepulsionForce=function(t,i){var c,M,N,L,D,et,x,l=t.getRect(),g=i.getRect(),u=new Array(2),T=new Array(4);if(l.intersects(g)){s.calcSeparationAmount(l,g,u,o.DEFAULT_EDGE_LENGTH/2),x=2*u[1];var nt=t.noOfChildren*i.noOfChildren/(t.noOfChildren+i.noOfChildren);t.repulsionForceX-=nt*(et=2*u[0]),t.repulsionForceY-=nt*x,i.repulsionForceX+=nt*et,i.repulsionForceY+=nt*x}else this.uniformLeafNodeSizes&&null==t.getChild()&&null==i.getChild()?(c=g.getCenterX()-l.getCenterX(),M=g.getCenterY()-l.getCenterY()):(s.getIntersection(l,g,T),c=T[2]-T[0],M=T[3]-T[1]),Math.abs(c)<o.MIN_REPULSION_DIST&&(c=f.sign(c)*o.MIN_REPULSION_DIST),Math.abs(M)<o.MIN_REPULSION_DIST&&(M=f.sign(M)*o.MIN_REPULSION_DIST),N=c*c+M*M,L=Math.sqrt(N),x=(D=(t.nodeRepulsion/2+i.nodeRepulsion/2)*t.noOfChildren*i.noOfChildren/N)*M/L,t.repulsionForceX-=et=D*c/L,t.repulsionForceY-=x,i.repulsionForceX+=et,i.repulsionForceY+=x},e.prototype.calcGravitationalForce=function(t){var i,l,g,u,T,c,M,N;l=((i=t.getOwner()).getRight()+i.getLeft())/2,g=(i.getTop()+i.getBottom())/2,u=t.getCenterX()-l,T=t.getCenterY()-g,c=Math.abs(u)+t.getWidth()/2,M=Math.abs(T)+t.getHeight()/2,t.getOwner()==this.graphManager.getRoot()?(c>(N=i.getEstimatedSize()*this.gravityRangeFactor)||M>N)&&(t.gravitationForceX=-this.gravityConstant*u,t.gravitationForceY=-this.gravityConstant*T):(c>(N=i.getEstimatedSize()*this.compoundGravityRangeFactor)||M>N)&&(t.gravitationForceX=-this.gravityConstant*u*this.compoundGravityConstant,t.gravitationForceY=-this.gravityConstant*T*this.compoundGravityConstant)},e.prototype.isConverged=function(){var t,i=!1;return this.totalIterations>this.maxIterations/3&&(i=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),t=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,t||i},e.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},e.prototype.calcNoOfChildrenForAllNodes=function(){for(var t,i=this.graphManager.getAllNodes(),l=0;l<i.length;l++)(t=i[l]).noOfChildren=t.getNoOfChildren()},e.prototype.calcGrid=function(t){var i,l;i=parseInt(Math.ceil((t.getRight()-t.getLeft())/this.repulsionRange)),l=parseInt(Math.ceil((t.getBottom()-t.getTop())/this.repulsionRange));for(var g=new Array(i),u=0;u<i;u++)g[u]=new Array(l);for(u=0;u<i;u++)for(var T=0;T<l;T++)g[u][T]=new Array;return g},e.prototype.addNodeToGrid=function(t,i,l){var g,u,T,c;g=parseInt(Math.floor((t.getRect().x-i)/this.repulsionRange)),u=parseInt(Math.floor((t.getRect().width+t.getRect().x-i)/this.repulsionRange)),T=parseInt(Math.floor((t.getRect().y-l)/this.repulsionRange)),c=parseInt(Math.floor((t.getRect().height+t.getRect().y-l)/this.repulsionRange));for(var M=g;M<=u;M++)for(var N=T;N<=c;N++)this.grid[M][N].push(t),t.setGridCoordinates(g,u,T,c)},e.prototype.updateGrid=function(){var t,l=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),t=0;t<l.length;t++)this.addNodeToGrid(l[t],this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},e.prototype.calculateRepulsionForceOfANode=function(t,i,l,g){if(this.totalIterations%o.GRID_CALCULATION_CHECK_PERIOD==1&&l||g){var u=new Set;t.surrounding=new Array;for(var T,c=this.grid,M=t.startX-1;M<t.finishX+2;M++)for(var N=t.startY-1;N<t.finishY+2;N++)if(!(M<0||N<0||M>=c.length||N>=c[0].length))for(var L=0;L<c[M][N].length;L++)if(T=c[M][N][L],t.getOwner()==T.getOwner()&&t!=T&&!i.has(T)&&!u.has(T)){var D=Math.abs(t.getCenterX()-T.getCenterX())-(t.getWidth()/2+T.getWidth()/2),et=Math.abs(t.getCenterY()-T.getCenterY())-(t.getHeight()/2+T.getHeight()/2);D<=this.repulsionRange&&et<=this.repulsionRange&&u.add(T)}t.surrounding=[].concat(function y(t){if(Array.isArray(t)){for(var i=0,l=Array(t.length);i<t.length;i++)l[i]=t[i];return l}return Array.from(t)}(u))}for(M=0;M<t.surrounding.length;M++)this.calcRepulsionForce(t,t.surrounding[M])},e.prototype.calcRepulsionRange=function(){return 0},vt.exports=e},function(vt,Et,R){"use strict";var y=R(1),h=R(4);function o(s,f,e){y.call(this,s,f,e),this.idealLength=h.DEFAULT_EDGE_LENGTH,this.edgeElasticity=h.DEFAULT_SPRING_STRENGTH}for(var a in o.prototype=Object.create(y.prototype),y)o[a]=y[a];vt.exports=o},function(vt,Et,R){"use strict";var y=R(3),h=R(4);function o(s,f,e,d){y.call(this,s,f,e,d),this.nodeRepulsion=h.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var a in o.prototype=Object.create(y.prototype),y)o[a]=y[a];o.prototype.setGridCoordinates=function(s,f,e,d){this.startX=s,this.finishX=f,this.startY=e,this.finishY=d},vt.exports=o},function(vt,Et,R){"use strict";function y(h,o){this.width=0,this.height=0,null!==h&&null!==o&&(this.height=o,this.width=h)}y.prototype.getWidth=function(){return this.width},y.prototype.setWidth=function(h){this.width=h},y.prototype.getHeight=function(){return this.height},y.prototype.setHeight=function(h){this.height=h},vt.exports=y},function(vt,Et,R){"use strict";var y=R(14);function h(){this.map={},this.keys=[]}h.prototype.put=function(o,a){var s=y.createID(o);this.contains(s)||(this.map[s]=a,this.keys.push(o))},h.prototype.contains=function(o){return y.createID(o),null!=this.map[o]},h.prototype.get=function(o){var a=y.createID(o);return this.map[a]},h.prototype.keySet=function(){return this.keys},vt.exports=h},function(vt,Et,R){"use strict";var y=R(14);function h(){this.set={}}h.prototype.add=function(o){var a=y.createID(o);this.contains(a)||(this.set[a]=o)},h.prototype.remove=function(o){delete this.set[y.createID(o)]},h.prototype.clear=function(){this.set={}},h.prototype.contains=function(o){return this.set[y.createID(o)]==o},h.prototype.isEmpty=function(){return 0===this.size()},h.prototype.size=function(){return Object.keys(this.set).length},h.prototype.addAllTo=function(o){for(var a=Object.keys(this.set),s=a.length,f=0;f<s;f++)o.push(this.set[a[f]])},h.prototype.size=function(){return Object.keys(this.set).length},h.prototype.addAll=function(o){for(var a=o.length,s=0;s<a;s++)this.add(o[s])},vt.exports=h},function(vt,Et,R){"use strict";function y(){}y.multMat=function(h,o){for(var a=[],s=0;s<h.length;s++){a[s]=[];for(var f=0;f<o[0].length;f++){a[s][f]=0;for(var e=0;e<h[0].length;e++)a[s][f]+=h[s][e]*o[e][f]}}return a},y.transpose=function(h){for(var o=[],a=0;a<h[0].length;a++){o[a]=[];for(var s=0;s<h.length;s++)o[a][s]=h[s][a]}return o},y.multCons=function(h,o){for(var a=[],s=0;s<h.length;s++)a[s]=h[s]*o;return a},y.minusOp=function(h,o){for(var a=[],s=0;s<h.length;s++)a[s]=h[s]-o[s];return a},y.dotProduct=function(h,o){for(var a=0,s=0;s<h.length;s++)a+=h[s]*o[s];return a},y.mag=function(h){return Math.sqrt(this.dotProduct(h,h))},y.normalize=function(h){for(var o=[],a=this.mag(h),s=0;s<h.length;s++)o[s]=h[s]/a;return o},y.multGamma=function(h){for(var o=[],a=0,s=0;s<h.length;s++)a+=h[s];a*=-1/h.length;for(var f=0;f<h.length;f++)o[f]=a+h[f];return o},y.multL=function(h,o,a){for(var s=[],f=[],e=[],d=0;d<o[0].length;d++){for(var t=0,i=0;i<o.length;i++)t+=-.5*o[i][d]*h[i];f[d]=t}for(var l=0;l<a.length;l++){for(var g=0,u=0;u<a.length;u++)g+=a[l][u]*f[u];e[l]=g}for(var T=0;T<o.length;T++){for(var c=0,M=0;M<o[0].length;M++)c+=o[T][M]*e[M];s[T]=c}return s},vt.exports=y},function(vt,Et,R){"use strict";var y=function(){function s(f,e){for(var d=0;d<e.length;d++){var t=e[d];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(f,t.key,t)}}return function(f,e,d){return e&&s(f.prototype,e),d&&s(f,d),f}}();var o=R(11),a=function(){function s(f,e){(function h(s,f){if(!(s instanceof f))throw new TypeError("Cannot call a class as a function")})(this,s),(null!==e||void 0!==e)&&(this.compareFunction=this._defaultCompareFunction);var d;d=f instanceof o?f.size():f.length,this._quicksort(f,0,d-1)}return y(s,[{key:"_quicksort",value:function(e,d,t){if(d<t){var i=this._partition(e,d,t);this._quicksort(e,d,i),this._quicksort(e,i+1,t)}}},{key:"_partition",value:function(e,d,t){for(var i=this._get(e,d),l=d,g=t;;){for(;this.compareFunction(i,this._get(e,g));)g--;for(;this.compareFunction(this._get(e,l),i);)l++;if(!(l<g))return g;this._swap(e,l,g),l++,g--}}},{key:"_get",value:function(e,d){return e instanceof o?e.get_object_at(d):e[d]}},{key:"_set",value:function(e,d,t){e instanceof o?e.set_object_at(d,t):e[d]=t}},{key:"_swap",value:function(e,d,t){var i=this._get(e,d);this._set(e,d,this._get(e,t)),this._set(e,t,i)}},{key:"_defaultCompareFunction",value:function(e,d){return d>e}}]),s}();vt.exports=a},function(vt,Et,R){"use strict";function y(){}y.svd=function(h){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=h.length,this.n=h[0].length;var o=Math.min(this.m,this.n);this.s=function(pt){for(var yt=[];pt-- >0;)yt.push(0);return yt}(Math.min(this.m+1,this.n)),this.U=function It(Nt){if(0==Nt.length)return 0;for(var St=[],wt=0;wt<Nt[0];wt++)St.push(It(Nt.slice(1)));return St}([this.m,o]),this.V=function It(Nt){if(0==Nt.length)return 0;for(var St=[],wt=0;wt<Nt[0];wt++)St.push(It(Nt.slice(1)));return St}([this.n,this.n]);for(var a=function(pt){for(var yt=[];pt-- >0;)yt.push(0);return yt}(this.n),s=function(pt){for(var yt=[];pt-- >0;)yt.push(0);return yt}(this.m),e=!0,d=Math.min(this.m-1,this.n),t=Math.max(0,Math.min(this.n-2,this.m)),i=0;i<Math.max(d,t);i++){if(i<d){this.s[i]=0;for(var l=i;l<this.m;l++)this.s[i]=y.hypot(this.s[i],h[l][i]);if(0!==this.s[i]){h[i][i]<0&&(this.s[i]=-this.s[i]);for(var g=i;g<this.m;g++)h[g][i]/=this.s[i];h[i][i]+=1}this.s[i]=-this.s[i]}for(var u=i+1;u<this.n;u++){if(function(pt,yt){return pt&&yt}(i<d,0!==this.s[i])){for(var T=0,c=i;c<this.m;c++)T+=h[c][i]*h[c][u];T=-T/h[i][i];for(var M=i;M<this.m;M++)h[M][u]+=T*h[M][i]}a[u]=h[i][u]}if(function(pt,yt){return yt}(0,i<d))for(var N=i;N<this.m;N++)this.U[N][i]=h[N][i];if(i<t){a[i]=0;for(var L=i+1;L<this.n;L++)a[i]=y.hypot(a[i],a[L]);if(0!==a[i]){a[i+1]<0&&(a[i]=-a[i]);for(var D=i+1;D<this.n;D++)a[D]/=a[i];a[i+1]+=1}if(a[i]=-a[i],function(pt,yt){return pt&&yt}(i+1<this.m,0!==a[i])){for(var et=i+1;et<this.m;et++)s[et]=0;for(var x=i+1;x<this.n;x++)for(var nt=i+1;nt<this.m;nt++)s[nt]+=a[x]*h[nt][x];for(var dt=i+1;dt<this.n;dt++)for(var ct=-a[dt]/a[i+1],mt=i+1;mt<this.m;mt++)h[mt][dt]+=ct*s[mt]}for(var P=i+1;P<this.n;P++)this.V[P][i]=a[P]}}var J=Math.min(this.n,this.m+1);d<this.n&&(this.s[d]=h[d][d]),this.m<J&&(this.s[J-1]=0),t+1<J&&(a[t]=h[t][J-1]),a[J-1]=0;for(var r=d;r<o;r++){for(var m=0;m<this.m;m++)this.U[m][r]=0;this.U[r][r]=1}for(var n=d-1;n>=0;n--)if(0!==this.s[n]){for(var E=n+1;E<o;E++){for(var p=0,I=n;I<this.m;I++)p+=this.U[I][n]*this.U[I][E];p=-p/this.U[n][n];for(var w=n;w<this.m;w++)this.U[w][E]+=p*this.U[w][n]}for(var X=n;X<this.m;X++)this.U[X][n]=-this.U[X][n];this.U[n][n]=1+this.U[n][n];for(var Y=0;Y<n-1;Y++)this.U[Y][n]=0}else{for(var b=0;b<this.m;b++)this.U[b][n]=0;this.U[n][n]=1}for(var tt=this.n-1;tt>=0;tt--){if(function(pt,yt){return pt&&yt}(tt<t,0!==a[tt]))for(var lt=tt+1;lt<o;lt++){for(var W=0,ht=tt+1;ht<this.n;ht++)W+=this.V[ht][tt]*this.V[ht][lt];W=-W/this.V[tt+1][tt];for(var _=tt+1;_<this.n;_++)this.V[_][lt]+=W*this.V[_][tt]}for(var O=0;O<this.n;O++)this.V[O][tt]=0;this.V[tt][tt]=1}for(var z=J-1,st=Math.pow(2,-52),ft=Math.pow(2,-966);J>0;){var it=void 0,Pt=void 0;for(it=J-2;it>=-1&&-1!==it;it--)if(Math.abs(a[it])<=ft+st*(Math.abs(this.s[it])+Math.abs(this.s[it+1]))){a[it]=0;break}if(it===J-2)Pt=4;else{var Lt=void 0;for(Lt=J-1;Lt>=it&&Lt!==it;Lt--){var kt=(Lt!==J?Math.abs(a[Lt]):0)+(Lt!==it+1?Math.abs(a[Lt-1]):0);if(Math.abs(this.s[Lt])<=ft+st*kt){this.s[Lt]=0;break}}Lt===it?Pt=3:Lt===J-1?Pt=1:(Pt=2,it=Lt)}switch(it++,Pt){case 1:var Ut=a[J-2];a[J-2]=0;for(var ut=J-2;ut>=it;ut--){var gt=y.hypot(this.s[ut],Ut),xt=this.s[ut]/gt,Dt=Ut/gt;this.s[ut]=gt,ut!==it&&(Ut=-Dt*a[ut-1],a[ut-1]=xt*a[ut-1]);for(var At=0;At<this.n;At++)gt=xt*this.V[At][ut]+Dt*this.V[At][J-1],this.V[At][J-1]=-Dt*this.V[At][ut]+xt*this.V[At][J-1],this.V[At][ut]=gt}break;case 2:var Ct=a[it-1];a[it-1]=0;for(var Mt=it;Mt<J;Mt++){var Rt=y.hypot(this.s[Mt],Ct),Wt=this.s[Mt]/Rt,Jt=Ct/Rt;this.s[Mt]=Rt,Ct=-Jt*a[Mt],a[Mt]=Wt*a[Mt];for(var bt=0;bt<this.m;bt++)Rt=Wt*this.U[bt][Mt]+Jt*this.U[bt][it-1],this.U[bt][it-1]=-Jt*this.U[bt][Mt]+Wt*this.U[bt][it-1],this.U[bt][Mt]=Rt}break;case 3:var Yt=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[J-1]),Math.abs(this.s[J-2])),Math.abs(a[J-2])),Math.abs(this.s[it])),Math.abs(a[it])),Xt=this.s[J-1]/Yt,V=this.s[J-2]/Yt,Q=a[J-2]/Yt,q=this.s[it]/Yt,v=a[it]/Yt,A=((V+Xt)*(V-Xt)+Q*Q)/2,C=Xt*Q*(Xt*Q),Z=0;(function(pt,yt){return pt||yt})(0!==A,0!==C)&&(Z=Math.sqrt(A*A+C),A<0&&(Z=-Z),Z=C/(A+Z));for(var G=(q+Xt)*(q-Xt)+Z,S=q*v,F=it;F<J-1;F++){var $=y.hypot(G,S),ot=G/$,U=S/$;F!==it&&(a[F-1]=$),G=ot*this.s[F]+U*a[F],a[F]=ot*a[F]-U*this.s[F],S=U*this.s[F+1],this.s[F+1]=ot*this.s[F+1];for(var at=0;at<this.n;at++)$=ot*this.V[at][F]+U*this.V[at][F+1],this.V[at][F+1]=-U*this.V[at][F]+ot*this.V[at][F+1],this.V[at][F]=$;if(ot=G/($=y.hypot(G,S)),U=S/$,this.s[F]=$,G=ot*a[F]+U*this.s[F+1],this.s[F+1]=-U*a[F]+ot*this.s[F+1],S=U*a[F+1],a[F+1]=ot*a[F+1],F<this.m-1)for(var H=0;H<this.m;H++)$=ot*this.U[H][F]+U*this.U[H][F+1],this.U[H][F+1]=-U*this.U[H][F]+ot*this.U[H][F+1],this.U[H][F]=$}a[J-2]=G;break;case 4:if(this.s[it]<=0&&(this.s[it]=this.s[it]<0?-this.s[it]:0,e))for(var k=0;k<=z;k++)this.V[k][it]=-this.V[k][it];for(;it<z&&!(this.s[it]>=this.s[it+1]);){var rt=this.s[it];if(this.s[it]=this.s[it+1],this.s[it+1]=rt,it<this.n-1)for(var B=0;B<this.n;B++)rt=this.V[B][it+1],this.V[B][it+1]=this.V[B][it],this.V[B][it]=rt;if(it<this.m-1)for(var j=0;j<this.m;j++)rt=this.U[j][it+1],this.U[j][it+1]=this.U[j][it],this.U[j][it]=rt;it++}J--}}return{U:this.U,V:this.V,S:this.s}},y.hypot=function(h,o){var a=void 0;return Math.abs(h)>Math.abs(o)?(a=o/h,a=Math.abs(h)*Math.sqrt(1+a*a)):0!=o?(a=h/o,a=Math.abs(o)*Math.sqrt(1+a*a)):a=0,a},vt.exports=y},function(vt,Et,R){"use strict";var y=function(){function a(s,f){for(var e=0;e<f.length;e++){var d=f[e];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(s,d.key,d)}}return function(s,f,e){return f&&a(s.prototype,f),e&&a(s,e),s}}();var o=function(){function a(s,f){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,t=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;(function h(a,s){if(!(a instanceof s))throw new TypeError("Cannot call a class as a function")})(this,a),this.sequence1=s,this.sequence2=f,this.match_score=e,this.mismatch_penalty=d,this.gap_penalty=t,this.iMax=s.length+1,this.jMax=f.length+1,this.grid=new Array(this.iMax);for(var i=0;i<this.iMax;i++){this.grid[i]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.grid[i][l]=0}this.tracebackGrid=new Array(this.iMax);for(var g=0;g<this.iMax;g++){this.tracebackGrid[g]=new Array(this.jMax);for(var u=0;u<this.jMax;u++)this.tracebackGrid[g][u]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return y(a,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var f=1;f<this.jMax;f++)this.grid[0][f]=this.grid[0][f-1]+this.gap_penalty,this.tracebackGrid[0][f]=[!1,!1,!0];for(var e=1;e<this.iMax;e++)this.grid[e][0]=this.grid[e-1][0]+this.gap_penalty,this.tracebackGrid[e][0]=[!1,!0,!1];for(var d=1;d<this.iMax;d++)for(var t=1;t<this.jMax;t++){var u=[this.sequence1[d-1]===this.sequence2[t-1]?this.grid[d-1][t-1]+this.match_score:this.grid[d-1][t-1]+this.mismatch_penalty,this.grid[d-1][t]+this.gap_penalty,this.grid[d][t-1]+this.gap_penalty],T=this.arrayAllMaxIndexes(u);this.grid[d][t]=u[T[0]],this.tracebackGrid[d][t]=[T.includes(0),T.includes(1),T.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var f=[];for(f.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});f[0];){var e=f[0],d=this.tracebackGrid[e.pos[0]][e.pos[1]];d[0]&&f.push({pos:[e.pos[0]-1,e.pos[1]-1],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),d[1]&&f.push({pos:[e.pos[0]-1,e.pos[1]],seq1:this.sequence1[e.pos[0]-1]+e.seq1,seq2:"-"+e.seq2}),d[2]&&f.push({pos:[e.pos[0],e.pos[1]-1],seq1:"-"+e.seq1,seq2:this.sequence2[e.pos[1]-1]+e.seq2}),0===e.pos[0]&&0===e.pos[1]&&this.alignments.push({sequence1:e.seq1,sequence2:e.seq2}),f.shift()}return this.alignments}},{key:"getAllIndexes",value:function(f,e){for(var d=[],t=-1;-1!==(t=f.indexOf(e,t+1));)d.push(t);return d}},{key:"arrayAllMaxIndexes",value:function(f){return this.getAllIndexes(f,Math.max.apply(null,f))}}]),a}();vt.exports=o},function(vt,Et,R){"use strict";var y=function(){};y.FDLayout=R(18),y.FDLayoutConstants=R(4),y.FDLayoutEdge=R(19),y.FDLayoutNode=R(20),y.DimensionD=R(21),y.HashMap=R(22),y.HashSet=R(23),y.IGeometry=R(8),y.IMath=R(9),y.Integer=R(10),y.Point=R(12),y.PointD=R(5),y.RandomSeed=R(16),y.RectangleD=R(13),y.Transform=R(17),y.UniqueIDGeneretor=R(14),y.Quicksort=R(25),y.LinkedList=R(11),y.LGraphObject=R(2),y.LGraph=R(6),y.LEdge=R(1),y.LGraphManager=R(7),y.LNode=R(3),y.Layout=R(15),y.LayoutConstants=R(0),y.NeedlemanWunsch=R(27),y.Matrix=R(24),y.SVD=R(26),vt.exports=y},function(vt,Et,R){"use strict";function y(){this.listeners=[]}var h=y.prototype;h.addListener=function(o,a){this.listeners.push({event:o,callback:a})},h.removeListener=function(o,a){for(var s=this.listeners.length;s>=0;s--){var f=this.listeners[s];f.event===o&&f.callback===a&&this.listeners.splice(s,1)}},h.emit=function(o,a){for(var s=0;s<this.listeners.length;s++){var f=this.listeners[s];o===f.event&&f.callback(a)}},vt.exports=y}])},7236:function(ee,vt,Et){var R;ee.exports=(R=Et(7988),(()=>{"use strict";var y={658:s=>{s.exports=null!=Object.assign?Object.assign.bind(Object):function(f){for(var e=arguments.length,d=Array(e>1?e-1:0),t=1;t<e;t++)d[t-1]=arguments[t];return d.forEach(function(i){Object.keys(i).forEach(function(l){return f[l]=i[l]})}),f}},548:(s,f,e)=>{var d=function(){return function(g,u){if(Array.isArray(g))return g;if(Symbol.iterator in Object(g))return function l(g,u){var T=[],c=!0,M=!1,N=void 0;try{for(var D,L=g[Symbol.iterator]();!(c=(D=L.next()).done)&&(T.push(D.value),!u||T.length!==u);c=!0);}catch(et){M=!0,N=et}finally{try{!c&&L.return&&L.return()}finally{if(M)throw N}}return T}(g,u);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t=e(140).layoutBase.LinkedList;s.exports={getTopMostNodes:function(l){for(var g={},u=0;u<l.length;u++)g[l[u].id()]=!0;return l.filter(function(c,M){"number"==typeof c&&(c=M);for(var N=c.parent()[0];null!=N;){if(g[N.id()])return!1;N=N.parent()[0]}return!0})},connectComponents:function(l,g,u,T){var c=new t,M=new Set,N=[],L=void 0,D=void 0,et=void 0,x=!1,nt=1,dt=[],ct=[],mt=function(){var J=l.collection();ct.push(J);var r=u[0],m=l.collection();m.merge(r).merge(r.descendants().intersection(g)),N.push(r),m.forEach(function(p){c.push(p),M.add(p),J.merge(p)});for(var n=function(){r=c.shift();var I=l.collection();r.neighborhood().nodes().forEach(function(b){g.intersection(r.edgesWith(b)).length>0&&I.merge(b)});for(var w=0;w<I.length;w++){var X=I[w];null==(L=u.intersection(X.union(X.ancestors())))||M.has(L[0])||L.union(L.descendants()).forEach(function(b){c.push(b),M.add(b),J.merge(b),u.has(b)&&N.push(b)})}};0!=c.length;)n();if(J.forEach(function(p){g.intersection(p.connectedEdges()).forEach(function(I){J.has(I.source())&&J.has(I.target())&&J.merge(I)})}),N.length==u.length&&(x=!0),!x||x&&nt>1){et=(D=N[0]).connectedEdges().length,N.forEach(function(p){p.connectedEdges().length<et&&(et=p.connectedEdges().length,D=p)}),dt.push(D.id());var E=l.collection();E.merge(N[0]),N.forEach(function(p){E.merge(p)}),N=[],u=u.difference(E),nt++}};do{mt()}while(!x);return T&&dt.length>0&&T.set("dummy"+(T.size+1),dt),ct},relocateComponent:function(l,g,u){if(!u.fixedNodeConstraint){var T=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,M=Number.POSITIVE_INFINITY,N=Number.NEGATIVE_INFINITY;if("draft"==u.quality){var L=!0,D=!1,et=void 0;try{for(var nt,x=g.nodeIndexes[Symbol.iterator]();!(L=(nt=x.next()).done);L=!0){var ct=d(nt.value,2),P=ct[1],J=u.cy.getElementById(ct[0]);if(J){var r=J.boundingBox(),m=g.xCoords[P]-r.w/2,n=g.xCoords[P]+r.w/2,E=g.yCoords[P]-r.h/2,p=g.yCoords[P]+r.h/2;m<T&&(T=m),n>c&&(c=n),E<M&&(M=E),p>N&&(N=p)}}}catch(b){D=!0,et=b}finally{try{!L&&x.return&&x.return()}finally{if(D)throw et}}var I=l.x-(c+T)/2,w=l.y-(N+M)/2;g.xCoords=g.xCoords.map(function(b){return b+I}),g.yCoords=g.yCoords.map(function(b){return b+w})}else{Object.keys(g).forEach(function(b){var tt=g[b],lt=tt.getRect().x,W=tt.getRect().x+tt.getRect().width,ht=tt.getRect().y,_=tt.getRect().y+tt.getRect().height;lt<T&&(T=lt),W>c&&(c=W),ht<M&&(M=ht),_>N&&(N=_)});var X=l.x-(c+T)/2,Y=l.y-(N+M)/2;Object.keys(g).forEach(function(b){var tt=g[b];tt.setCenter(tt.getCenterX()+X,tt.getCenterY()+Y)})}}},calcBoundingBox:function(l,g,u,T){for(var c=Number.MAX_SAFE_INTEGER,M=Number.MIN_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER,L=Number.MIN_SAFE_INTEGER,D=void 0,et=void 0,x=void 0,nt=void 0,dt=l.descendants().not(":parent"),ct=dt.length,mt=0;mt<ct;mt++){var P=dt[mt];c>(D=g[T.get(P.id())]-P.width()/2)&&(c=D),M<(et=g[T.get(P.id())]+P.width()/2)&&(M=et),N>(x=u[T.get(P.id())]-P.height()/2)&&(N=x),L<(nt=u[T.get(P.id())]+P.height()/2)&&(L=nt)}var J={};return J.topLeftX=c,J.topLeftY=N,J.width=M-c,J.height=L-N,J},calcParentsWithoutChildren:function(l,g){var u=l.collection();return g.nodes(":parent").forEach(function(T){var c=!1;T.children().forEach(function(M){"none"!=M.css("display")&&(c=!0)}),c||u.merge(T)}),u}}},816:(s,f,e)=>{var d=e(548),t=e(140).CoSELayout,i=e(140).CoSENode,l=e(140).layoutBase.PointD,g=e(140).layoutBase.DimensionD,u=e(140).layoutBase.LayoutConstants,T=e(140).layoutBase.FDLayoutConstants,c=e(140).CoSEConstants;s.exports={coseLayout:function(L,D){var et=L.cy,x=L.eles,nt=x.nodes(),dt=x.edges(),ct=void 0,mt=void 0,P=void 0,J={};L.randomize&&(ct=D.nodeIndexes,mt=D.xCoords,P=D.yCoords);var r=function(b){return"function"==typeof b},m=function(b,tt){return r(b)?b(tt):b},n=d.calcParentsWithoutChildren(et,x);null!=L.nestingFactor&&(c.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=T.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=L.nestingFactor),null!=L.gravity&&(c.DEFAULT_GRAVITY_STRENGTH=T.DEFAULT_GRAVITY_STRENGTH=L.gravity),null!=L.numIter&&(c.MAX_ITERATIONS=T.MAX_ITERATIONS=L.numIter),null!=L.gravityRange&&(c.DEFAULT_GRAVITY_RANGE_FACTOR=T.DEFAULT_GRAVITY_RANGE_FACTOR=L.gravityRange),null!=L.gravityCompound&&(c.DEFAULT_COMPOUND_GRAVITY_STRENGTH=T.DEFAULT_COMPOUND_GRAVITY_STRENGTH=L.gravityCompound),null!=L.gravityRangeCompound&&(c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=T.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=L.gravityRangeCompound),null!=L.initialEnergyOnIncremental&&(c.DEFAULT_COOLING_FACTOR_INCREMENTAL=T.DEFAULT_COOLING_FACTOR_INCREMENTAL=L.initialEnergyOnIncremental),null!=L.tilingCompareBy&&(c.TILING_COMPARE_BY=L.tilingCompareBy),u.QUALITY="proof"==L.quality?2:0,c.NODE_DIMENSIONS_INCLUDE_LABELS=T.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=L.nodeDimensionsIncludeLabels,c.DEFAULT_INCREMENTAL=T.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!L.randomize,c.ANIMATE=T.ANIMATE=u.ANIMATE=L.animate,c.TILE=L.tile,c.TILING_PADDING_VERTICAL="function"==typeof L.tilingPaddingVertical?L.tilingPaddingVertical.call():L.tilingPaddingVertical,c.TILING_PADDING_HORIZONTAL="function"==typeof L.tilingPaddingHorizontal?L.tilingPaddingHorizontal.call():L.tilingPaddingHorizontal,c.DEFAULT_INCREMENTAL=T.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=!0,c.PURE_INCREMENTAL=!L.randomize,u.DEFAULT_UNIFORM_LEAF_NODE_SIZES=L.uniformNodeDimensions,"transformed"==L.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!1),"enforced"==L.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!1),"cose"==L.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,c.ENFORCE_CONSTRAINTS=!1,c.APPLY_LAYOUT=!0),"all"==L.step&&(c.TRANSFORM_ON_CONSTRAINT_HANDLING=!!L.randomize,c.ENFORCE_CONSTRAINTS=!0,c.APPLY_LAYOUT=!0),c.TREE_REDUCTION_ON_INCREMENTAL=!(L.fixedNodeConstraint||L.alignmentConstraint||L.relativePlacementConstraint);var b,tt,w=new t,X=w.newGraphManager();return function Y(b,tt,lt,W){for(var ht=tt.length,_=0;_<ht;_++){var O=tt[_],z=null;0==O.intersection(n).length&&(z=O.children());var K=void 0,st=O.layoutDimensions({nodeDimensionsIncludeLabels:W.nodeDimensionsIncludeLabels});if(null!=O.outerWidth()&&null!=O.outerHeight())if(W.randomize)if(O.isParent()){var ft=d.calcBoundingBox(O,mt,P,ct);K=0==O.intersection(n).length?b.add(new i(lt.graphManager,new l(ft.topLeftX,ft.topLeftY),new g(ft.width,ft.height))):b.add(new i(lt.graphManager,new l(ft.topLeftX,ft.topLeftY),new g(parseFloat(st.w),parseFloat(st.h))))}else K=b.add(new i(lt.graphManager,new l(mt[ct.get(O.id())]-st.w/2,P[ct.get(O.id())]-st.h/2),new g(parseFloat(st.w),parseFloat(st.h))));else K=b.add(new i(lt.graphManager,new l(O.position("x")-st.w/2,O.position("y")-st.h/2),new g(parseFloat(st.w),parseFloat(st.h))));else K=b.add(new i(this.graphManager));K.id=O.data("id"),K.nodeRepulsion=m(W.nodeRepulsion,O),K.paddingLeft=parseInt(O.css("padding")),K.paddingTop=parseInt(O.css("padding")),K.paddingRight=parseInt(O.css("padding")),K.paddingBottom=parseInt(O.css("padding")),W.nodeDimensionsIncludeLabels&&(K.labelWidth=O.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,K.labelHeight=O.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,K.labelPosVertical=O.css("text-valign"),K.labelPosHorizontal=O.css("text-halign")),J[O.data("id")]=K,isNaN(K.rect.x)&&(K.rect.x=0),isNaN(K.rect.y)&&(K.rect.y=0),null!=z&&z.length>0&&Y(lt.getGraphManager().add(lt.newGraph(),K),z,lt,W)}}(X.addRoot(),d.getTopMostNodes(nt),w,L),function(b,tt,lt){for(var W=0,ht=0,_=0;_<lt.length;_++){var O=lt[_],z=J[O.data("source")],K=J[O.data("target")];if(z&&K&&z!==K&&0==z.getEdgesBetween(K).length){var st=tt.add(b.newEdge(),z,K);st.id=O.id(),st.idealLength=m(L.idealEdgeLength,O),st.edgeElasticity=m(L.edgeElasticity,O),W+=st.idealLength,ht++}}null!=L.idealEdgeLength&&(c.DEFAULT_EDGE_LENGTH=T.DEFAULT_EDGE_LENGTH=ht>0?W/ht:r(L.idealEdgeLength)?50:L.idealEdgeLength,c.MIN_REPULSION_DIST=T.MIN_REPULSION_DIST=T.DEFAULT_EDGE_LENGTH/10,c.DEFAULT_RADIAL_SEPARATION=T.DEFAULT_EDGE_LENGTH)}(w,X,dt),b=w,(tt=L).fixedNodeConstraint&&(b.constraints.fixedNodeConstraint=tt.fixedNodeConstraint),tt.alignmentConstraint&&(b.constraints.alignmentConstraint=tt.alignmentConstraint),tt.relativePlacementConstraint&&(b.constraints.relativePlacementConstraint=tt.relativePlacementConstraint),w.runLayout(),J}}},212:(s,f,e)=>{var d=function(){function L(D,et){for(var x=0;x<et.length;x++){var nt=et[x];nt.enumerable=nt.enumerable||!1,nt.configurable=!0,"value"in nt&&(nt.writable=!0),Object.defineProperty(D,nt.key,nt)}}return function(D,et,x){return et&&L(D.prototype,et),x&&L(D,x),D}}();var i=e(658),l=e(548),u=e(657).spectralLayout,c=e(816).coseLayout,M=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:function(D){return 4500},idealEdgeLength:function(D){return 50},edgeElasticity:function(D){return.45},nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:function(){},stop:function(){}}),N=function(){function L(D){(function t(L,D){if(!(L instanceof D))throw new TypeError("Cannot call a class as a function")})(this,L),this.options=i({},M,D)}return d(L,[{key:"run",value:function(){var x=this.options,nt=x.cy,dt=x.eles,ct=[],J=[],r=void 0,m=[];x.fixedNodeConstraint&&(!Array.isArray(x.fixedNodeConstraint)||0==x.fixedNodeConstraint.length)&&(x.fixedNodeConstraint=void 0),x.alignmentConstraint&&(x.alignmentConstraint.vertical&&(!Array.isArray(x.alignmentConstraint.vertical)||0==x.alignmentConstraint.vertical.length)&&(x.alignmentConstraint.vertical=void 0),x.alignmentConstraint.horizontal&&(!Array.isArray(x.alignmentConstraint.horizontal)||0==x.alignmentConstraint.horizontal.length)&&(x.alignmentConstraint.horizontal=void 0)),x.relativePlacementConstraint&&(!Array.isArray(x.relativePlacementConstraint)||0==x.relativePlacementConstraint.length)&&(x.relativePlacementConstraint=void 0),(x.fixedNodeConstraint||x.alignmentConstraint||x.relativePlacementConstraint)&&(x.tile=!1,x.packComponents=!1);var E=void 0,p=!1;if(nt.layoutUtilities&&x.packComponents&&((E=nt.layoutUtilities("get"))||(E=nt.layoutUtilities()),p=!0),dt.nodes().length>0)if(p){var X=l.getTopMostNodes(x.eles.nodes());if((r=l.connectComponents(nt,x.eles,X)).forEach(function(ut){var gt=ut.boundingBox();m.push({x:gt.x1+gt.w/2,y:gt.y1+gt.h/2})}),x.randomize&&r.forEach(function(ut){x.eles=ut,ct.push(u(x))}),"default"==x.quality||"proof"==x.quality){var Y=nt.collection();if(x.tile){var W=0,ht={nodeIndexes:new Map,xCoords:[],yCoords:[]},_=[];if(r.forEach(function(ut,gt){0==ut.edges().length&&(ut.nodes().forEach(function(xt,Dt){Y.merge(ut.nodes()[Dt]),xt.isParent()||(ht.nodeIndexes.set(ut.nodes()[Dt].id(),W++),ht.xCoords.push(ut.nodes()[0].position().x),ht.yCoords.push(ut.nodes()[0].position().y))}),_.push(gt))}),Y.length>1){var O=Y.boundingBox();m.push({x:O.x1+O.w/2,y:O.y1+O.h/2}),r.push(Y),ct.push(ht);for(var z=_.length-1;z>=0;z--)r.splice(_[z],1),ct.splice(_[z],1),m.splice(_[z],1)}}r.forEach(function(ut,gt){x.eles=ut,J.push(c(x,ct[gt])),l.relocateComponent(m[gt],J[gt],x)})}else r.forEach(function(ut,gt){l.relocateComponent(m[gt],ct[gt],x)});var K=new Set;if(r.length>1){var st=[],ft=dt.filter(function(ut){return"none"==ut.css("display")});r.forEach(function(ut,gt){var xt=void 0;if("draft"==x.quality&&(xt=ct[gt].nodeIndexes),ut.nodes().not(ft).length>0){var Dt={edges:[],nodes:[]},At=void 0;ut.nodes().not(ft).forEach(function(Ct){if("draft"==x.quality)if(Ct.isParent()){var Mt=l.calcBoundingBox(Ct,ct[gt].xCoords,ct[gt].yCoords,xt);Dt.nodes.push({x:Mt.topLeftX,y:Mt.topLeftY,width:Mt.width,height:Mt.height})}else At=xt.get(Ct.id()),Dt.nodes.push({x:ct[gt].xCoords[At]-Ct.boundingbox().w/2,y:ct[gt].yCoords[At]-Ct.boundingbox().h/2,width:Ct.boundingbox().w,height:Ct.boundingbox().h});else J[gt][Ct.id()]&&Dt.nodes.push({x:J[gt][Ct.id()].getLeft(),y:J[gt][Ct.id()].getTop(),width:J[gt][Ct.id()].getWidth(),height:J[gt][Ct.id()].getHeight()})}),ut.edges().forEach(function(Ct){var Mt=Ct.source(),Rt=Ct.target();if("none"!=Mt.css("display")&&"none"!=Rt.css("display"))if("draft"==x.quality){var Wt=xt.get(Mt.id()),Jt=xt.get(Rt.id()),bt=[],Yt=[];if(Mt.isParent()){var Xt=l.calcBoundingBox(Mt,ct[gt].xCoords,ct[gt].yCoords,xt);bt.push(Xt.topLeftX+Xt.width/2),bt.push(Xt.topLeftY+Xt.height/2)}else bt.push(ct[gt].xCoords[Wt]),bt.push(ct[gt].yCoords[Wt]);if(Rt.isParent()){var V=l.calcBoundingBox(Rt,ct[gt].xCoords,ct[gt].yCoords,xt);Yt.push(V.topLeftX+V.width/2),Yt.push(V.topLeftY+V.height/2)}else Yt.push(ct[gt].xCoords[Jt]),Yt.push(ct[gt].yCoords[Jt]);Dt.edges.push({startX:bt[0],startY:bt[1],endX:Yt[0],endY:Yt[1]})}else J[gt][Mt.id()]&&J[gt][Rt.id()]&&Dt.edges.push({startX:J[gt][Mt.id()].getCenterX(),startY:J[gt][Mt.id()].getCenterY(),endX:J[gt][Rt.id()].getCenterX(),endY:J[gt][Rt.id()].getCenterY()})}),Dt.nodes.length>0&&(st.push(Dt),K.add(gt))}});var it=E.packComponents(st,x.randomize).shifts;if("draft"==x.quality)ct.forEach(function(ut,gt){var xt=ut.xCoords.map(function(At){return At+it[gt].dx}),Dt=ut.yCoords.map(function(At){return At+it[gt].dy});ut.xCoords=xt,ut.yCoords=Dt});else{var Pt=0;K.forEach(function(ut){Object.keys(J[ut]).forEach(function(gt){var xt=J[ut][gt];xt.setCenter(xt.getCenterX()+it[Pt].dx,xt.getCenterY()+it[Pt].dy)}),Pt++})}}}else{var I=x.eles.boundingBox();if(m.push({x:I.x1+I.w/2,y:I.y1+I.h/2}),x.randomize){var w=u(x);ct.push(w)}"default"==x.quality||"proof"==x.quality?(J.push(c(x,ct[0])),l.relocateComponent(m[0],J[0],x)):l.relocateComponent(m[0],ct[0],x)}var Lt=function(gt,xt){if("default"==x.quality||"proof"==x.quality){"number"==typeof gt&&(gt=xt);var Dt=void 0,At=void 0,Ct=gt.data("id");return J.forEach(function(Rt){Ct in Rt&&(Dt={x:Rt[Ct].getRect().getCenterX(),y:Rt[Ct].getRect().getCenterY()},At=Rt[Ct])}),x.nodeDimensionsIncludeLabels&&(At.labelWidth&&("left"==At.labelPosHorizontal?Dt.x+=At.labelWidth/2:"right"==At.labelPosHorizontal&&(Dt.x-=At.labelWidth/2)),At.labelHeight&&("top"==At.labelPosVertical?Dt.y+=At.labelHeight/2:"bottom"==At.labelPosVertical&&(Dt.y-=At.labelHeight/2))),null==Dt&&(Dt={x:gt.position("x"),y:gt.position("y")}),{x:Dt.x,y:Dt.y}}var Mt=void 0;return ct.forEach(function(Rt){var Wt=Rt.nodeIndexes.get(gt.id());null!=Wt&&(Mt={x:Rt.xCoords[Wt],y:Rt.yCoords[Wt]})}),null==Mt&&(Mt={x:gt.position("x"),y:gt.position("y")}),{x:Mt.x,y:Mt.y}};if("default"==x.quality||"proof"==x.quality||x.randomize){var kt=l.calcParentsWithoutChildren(nt,dt),Ut=dt.filter(function(ut){return"none"==ut.css("display")});x.eles=dt.not(Ut),dt.nodes().not(":parent").not(Ut).layoutPositions(this,x,Lt),kt.length>0&&kt.forEach(function(ut){ut.position(Lt(ut))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")}}]),L}();s.exports=N},657:(s,f,e)=>{var d=e(548),t=e(140).layoutBase.Matrix,i=e(140).layoutBase.SVD;s.exports={spectralLayout:function(u){var T=u.cy,c=u.eles,M=c.nodes(),N=c.nodes(":parent"),L=new Map,D=new Map,et=new Map,x=[],nt=[],dt=[],ct=[],mt=[],P=[],J=[],r=[],n=void 0,E=1e8,p=1e-9,I=u.piTol,w=u.samplingType,X=u.nodeSeparation,Y=void 0,tt=function(q,v,A){for(var C=[],Z=0,G=0,S=0,F=void 0,$=[],ot=0,U=1,at=0;at<n;at++)$[at]=E;for(C[G]=q,$[q]=0;G>=Z;){S=C[Z++];for(var H=x[S],k=0;k<H.length;k++)$[F=D.get(H[k])]==E&&($[F]=$[S]+1,C[++G]=F);P[S][v]=$[S]*X}if(A){for(var rt=0;rt<n;rt++)P[rt][v]<mt[rt]&&(mt[rt]=P[rt][v]);for(var B=0;B<n;B++)mt[B]>ot&&(ot=mt[B],U=B)}return U};d.connectComponents(T,c,d.getTopMostNodes(M),L),N.forEach(function(Q){d.connectComponents(T,c,d.getTopMostNodes(Q.descendants().intersection(c)),L)});for(var _=0,O=0;O<M.length;O++)M[O].isParent()||D.set(M[O].id(),_++);var z=!0,K=!1,st=void 0;try{for(var it,ft=L.keys()[Symbol.iterator]();!(z=(it=ft.next()).done);z=!0)D.set(it.value,_++)}catch(Q){K=!0,st=Q}finally{try{!z&&ft.return&&ft.return()}finally{if(K)throw st}}for(var Lt=0;Lt<D.size;Lt++)x[Lt]=[];N.forEach(function(Q){for(var q=Q.children().intersection(c);0==q.nodes(":childless").length;)q=q.nodes()[0].children().intersection(c);var v=0,A=q.nodes(":childless")[0].connectedEdges().length;q.nodes(":childless").forEach(function(C,Z){C.connectedEdges().length<A&&(A=C.connectedEdges().length,v=Z)}),et.set(Q.id(),q.nodes(":childless")[v].id())}),M.forEach(function(Q){var q;q=Q.isParent()?D.get(et.get(Q.id())):D.get(Q.id()),Q.neighborhood().nodes().forEach(function(v){c.intersection(Q.edgesWith(v)).length>0&&(v.isParent()?x[q].push(et.get(v.id())):x[q].push(v.id()))})});var kt=function(q){var v=D.get(q),A=void 0;L.get(q).forEach(function(C){A=T.getElementById(C).isParent()?et.get(C):C,x[v].push(A),x[D.get(A)].push(q)})},Ut=!0,ut=!1,gt=void 0;try{for(var Dt,xt=L.keys()[Symbol.iterator]();!(Ut=(Dt=xt.next()).done);Ut=!0)kt(Dt.value)}catch(Q){ut=!0,gt=Q}finally{try{!Ut&&xt.return&&xt.return()}finally{if(ut)throw gt}}var Ct=void 0;if((n=D.size)>2){Y=n<u.sampleSize?n:u.sampleSize;for(var Mt=0;Mt<n;Mt++)P[Mt]=[];for(var Rt=0;Rt<Y;Rt++)r[Rt]=[];return"draft"==u.quality||"all"==u.step?(function(q){var v=void 0;if(q){v=Math.floor(Math.random()*n);for(var C=0;C<n;C++)mt[C]=E;for(var Z=0;Z<Y;Z++)ct[Z]=v,v=tt(v,Z,q)}else{!function(){for(var q=0,v=0,A=!1;v<Y;){q=Math.floor(Math.random()*n),A=!1;for(var C=0;C<v;C++)if(ct[C]==q){A=!0;break}A||(ct[v]=q,v++)}}();for(var A=0;A<Y;A++)tt(ct[A],A,q)}for(var G=0;G<n;G++)for(var S=0;S<Y;S++)P[G][S]*=P[G][S];for(var F=0;F<Y;F++)J[F]=[];for(var $=0;$<Y;$++)for(var ot=0;ot<Y;ot++)J[$][ot]=P[ct[ot]][$]}(w),function(){for(var q=i.svd(J),v=q.S,A=q.U,C=q.V,Z=v[0]*v[0]*v[0],G=[],S=0;S<Y;S++){G[S]=[];for(var F=0;F<Y;F++)G[S][F]=0,S==F&&(G[S][F]=v[S]/(v[S]*v[S]+Z/(v[S]*v[S])))}r=t.multMat(t.multMat(C,G),t.transpose(A))}(),function(){for(var q=void 0,v=void 0,A=[],C=[],Z=[],G=[],S=0;S<n;S++)A[S]=Math.random(),C[S]=Math.random();A=t.normalize(A),C=t.normalize(C);for(var $=p,ot=p,U=void 0;;){for(var at=0;at<n;at++)Z[at]=A[at];if(A=t.multGamma(t.multL(t.multGamma(Z),P,r)),q=t.dotProduct(Z,A),A=t.normalize(A),$=t.dotProduct(Z,A),(U=Math.abs($/ot))<=1+I&&U>=1)break;ot=$}for(var H=0;H<n;H++)Z[H]=A[H];for(ot=p;;){for(var k=0;k<n;k++)G[k]=C[k];if(G=t.minusOp(G,t.multCons(Z,t.dotProduct(Z,G))),C=t.multGamma(t.multL(t.multGamma(G),P,r)),v=t.dotProduct(G,C),C=t.normalize(C),$=t.dotProduct(G,C),(U=Math.abs($/ot))<=1+I&&U>=1)break;ot=$}for(var rt=0;rt<n;rt++)G[rt]=C[rt];nt=t.multCons(Z,Math.sqrt(Math.abs(q))),dt=t.multCons(G,Math.sqrt(Math.abs(v)))}(),Ct={nodeIndexes:D,xCoords:nt,yCoords:dt}):(D.forEach(function(Q,q){nt.push(T.getElementById(q).position("x")),dt.push(T.getElementById(q).position("y"))}),Ct={nodeIndexes:D,xCoords:nt,yCoords:dt}),Ct}var Wt=D.keys(),Jt=T.getElementById(Wt.next().value),bt=Jt.position(),Yt=Jt.outerWidth();if(nt.push(bt.x),dt.push(bt.y),2==n){var V=T.getElementById(Wt.next().value).outerWidth();nt.push(bt.x+Yt/2+V/2+u.idealEdgeLength),dt.push(bt.y)}return{nodeIndexes:D,xCoords:nt,yCoords:dt}}}},579:(s,f,e)=>{var d=e(212),t=function(l){l&&l("layout","fcose",d)};typeof cytoscape<"u"&&t(cytoscape),s.exports=t},140:s=>{s.exports=R}},h={};return function o(s){var f=h[s];if(void 0!==f)return f.exports;var e=h[s]={exports:{}};return y[s](e,e.exports,o),e.exports}(579)})())},7988:function(ee,vt,Et){var R;ee.exports=(R=Et(6148),(()=>{"use strict";var y={45:(s,f,e)=>{var d={};d.layoutBase=e(551),d.CoSEConstants=e(806),d.CoSEEdge=e(767),d.CoSEGraph=e(880),d.CoSEGraphManager=e(578),d.CoSELayout=e(765),d.CoSENode=e(991),d.ConstraintHandler=e(902),s.exports=d},806:(s,f,e)=>{var d=e(551).FDLayoutConstants;function t(){}for(var i in d)t[i]=d[i];t.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,t.DEFAULT_RADIAL_SEPARATION=d.DEFAULT_EDGE_LENGTH,t.DEFAULT_COMPONENT_SEPERATION=60,t.TILE=!0,t.TILING_PADDING_VERTICAL=10,t.TILING_PADDING_HORIZONTAL=10,t.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,t.ENFORCE_CONSTRAINTS=!0,t.APPLY_LAYOUT=!0,t.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,t.TREE_REDUCTION_ON_INCREMENTAL=!0,t.PURE_INCREMENTAL=t.DEFAULT_INCREMENTAL,s.exports=t},767:(s,f,e)=>{var d=e(551).FDLayoutEdge;function t(l,g,u){d.call(this,l,g,u)}for(var i in t.prototype=Object.create(d.prototype),d)t[i]=d[i];s.exports=t},880:(s,f,e)=>{var d=e(551).LGraph;function t(l,g,u){d.call(this,l,g,u)}for(var i in t.prototype=Object.create(d.prototype),d)t[i]=d[i];s.exports=t},578:(s,f,e)=>{var d=e(551).LGraphManager;function t(l){d.call(this,l)}for(var i in t.prototype=Object.create(d.prototype),d)t[i]=d[i];s.exports=t},765:(s,f,e)=>{var d=e(551).FDLayout,t=e(578),i=e(880),l=e(991),g=e(767),u=e(806),T=e(902),c=e(551).FDLayoutConstants,M=e(551).LayoutConstants,N=e(551).Point,L=e(551).PointD,D=e(551).DimensionD,et=e(551).Layout,x=e(551).Integer,nt=e(551).IGeometry,dt=e(551).LGraph,ct=e(551).Transform,mt=e(551).LinkedList;function P(){d.call(this),this.toBeTiled={},this.constraints={}}for(var J in P.prototype=Object.create(d.prototype),d)P[J]=d[J];P.prototype.newGraphManager=function(){var r=new t(this);return this.graphManager=r,r},P.prototype.newGraph=function(r){return new i(null,this.graphManager,r)},P.prototype.newNode=function(r){return new l(this.graphManager,r)},P.prototype.newEdge=function(r){return new g(null,null,r)},P.prototype.initParameters=function(){d.prototype.initParameters.call(this,arguments),this.isSubLayout||(this.idealEdgeLength=u.DEFAULT_EDGE_LENGTH<10?10:u.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=u.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=c.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=c.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=c.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=c.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},P.prototype.initSpringEmbedder=function(){d.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/c.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},P.prototype.layout=function(){return M.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},P.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(u.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var m=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(I){return m.has(I)});this.graphManager.setAllNodesToApplyGravitation(n)}}else{var r=this.getFlatForest();r.length>0?this.positionNodesRadially(r):(this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation(),m=new Set(this.getAllNodes()),n=this.nodesWithGravity.filter(function(E){return m.has(E)}),this.graphManager.setAllNodesToApplyGravitation(n),this.positionNodesRandomly())}return Object.keys(this.constraints).length>0&&(T.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),u.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},P.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}if(this.totalIterations%c.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged()){if(!(this.prunedNodesAll.length>0))return!0;this.isTreeGrowing=!0}this.coolingCycle++,0==this.layoutQuality?this.coolingAdjuster=this.coolingCycle:1==this.layoutQuality&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var r=new Set(this.getAllNodes()),m=this.nodesWithGravity.filter(function(p){return r.has(p)});this.graphManager.setAllNodesToApplyGravitation(m),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=u.PURE_INCREMENTAL?c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:c.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=u.PURE_INCREMENTAL?c.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):c.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var n=!this.isTreeGrowing&&!this.isGrowthFinished,E=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(n,E),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},P.prototype.getPositionsData=function(){for(var r=this.graphManager.getAllNodes(),m={},n=0;n<r.length;n++){var E=r[n].rect,p=r[n].id;m[p]={id:p,x:E.getCenterX(),y:E.getCenterY(),w:E.width,h:E.height}}return m},P.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var r=!1;if("during"===c.ANIMATE)this.emit("layoutstarted");else{for(;!r;)r=this.tick();this.graphManager.updateBounds()}},P.prototype.moveNodes=function(){for(var r=this.getAllNodes(),n=0;n<r.length;n++)r[n].calculateDisplacement();for(Object.keys(this.constraints).length>0&&this.updateDisplacements(),n=0;n<r.length;n++)r[n].move()},P.prototype.initConstraintVariables=function(){var r=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var m=this.graphManager.getAllNodes(),n=0;n<m.length;n++)this.idToNodeMap.set((E=m[n]).id,E);var E,p=function O(z){for(var st,K=z.getChild().getNodes(),ft=0,it=0;it<K.length;it++)null==(st=K[it]).getChild()?r.fixedNodeSet.has(st.id)&&(ft+=100):ft+=O(st);return ft};if(this.constraints.fixedNodeConstraint)for(this.constraints.fixedNodeConstraint.forEach(function(K){r.fixedNodeSet.add(K.nodeId)}),m=this.graphManager.getAllNodes(),n=0;n<m.length;n++)if(null!=(E=m[n]).getChild()){var I=p(E);I>0&&(E.fixedNodeWeight=I)}if(this.constraints.relativePlacementConstraint){var w=new Map,X=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(O){r.fixedNodesOnHorizontal.add(O),r.fixedNodesOnVertical.add(O)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical){var Y=this.constraints.alignmentConstraint.vertical;for(n=0;n<Y.length;n++)this.dummyToNodeForVerticalAlignment.set("dummy"+n,[]),Y[n].forEach(function(z){w.set(z,"dummy"+n),r.dummyToNodeForVerticalAlignment.get("dummy"+n).push(z),r.fixedNodeSet.has(z)&&r.fixedNodesOnHorizontal.add("dummy"+n)})}if(this.constraints.alignmentConstraint.horizontal){var b=this.constraints.alignmentConstraint.horizontal;for(n=0;n<b.length;n++)this.dummyToNodeForHorizontalAlignment.set("dummy"+n,[]),b[n].forEach(function(z){X.set(z,"dummy"+n),r.dummyToNodeForHorizontalAlignment.get("dummy"+n).push(z),r.fixedNodeSet.has(z)&&r.fixedNodesOnVertical.add("dummy"+n)})}}if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(O){var z,K,st;for(st=O.length-1;st>=2*O.length/3;st--)z=Math.floor(Math.random()*(st+1)),K=O[st],O[st]=O[z],O[z]=K;return O},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(O){if(O.left){var z=w.has(O.left)?w.get(O.left):O.left,K=w.has(O.right)?w.get(O.right):O.right;r.nodesInRelativeHorizontal.includes(z)||(r.nodesInRelativeHorizontal.push(z),r.nodeToRelativeConstraintMapHorizontal.set(z,[]),r.dummyToNodeForVerticalAlignment.has(z)?r.nodeToTempPositionMapHorizontal.set(z,r.idToNodeMap.get(r.dummyToNodeForVerticalAlignment.get(z)[0]).getCenterX()):r.nodeToTempPositionMapHorizontal.set(z,r.idToNodeMap.get(z).getCenterX())),r.nodesInRelativeHorizontal.includes(K)||(r.nodesInRelativeHorizontal.push(K),r.nodeToRelativeConstraintMapHorizontal.set(K,[]),r.dummyToNodeForVerticalAlignment.has(K)?r.nodeToTempPositionMapHorizontal.set(K,r.idToNodeMap.get(r.dummyToNodeForVerticalAlignment.get(K)[0]).getCenterX()):r.nodeToTempPositionMapHorizontal.set(K,r.idToNodeMap.get(K).getCenterX())),r.nodeToRelativeConstraintMapHorizontal.get(z).push({right:K,gap:O.gap}),r.nodeToRelativeConstraintMapHorizontal.get(K).push({left:z,gap:O.gap})}else{var st=X.has(O.top)?X.get(O.top):O.top,ft=X.has(O.bottom)?X.get(O.bottom):O.bottom;r.nodesInRelativeVertical.includes(st)||(r.nodesInRelativeVertical.push(st),r.nodeToRelativeConstraintMapVertical.set(st,[]),r.dummyToNodeForHorizontalAlignment.has(st)?r.nodeToTempPositionMapVertical.set(st,r.idToNodeMap.get(r.dummyToNodeForHorizontalAlignment.get(st)[0]).getCenterY()):r.nodeToTempPositionMapVertical.set(st,r.idToNodeMap.get(st).getCenterY())),r.nodesInRelativeVertical.includes(ft)||(r.nodesInRelativeVertical.push(ft),r.nodeToRelativeConstraintMapVertical.set(ft,[]),r.dummyToNodeForHorizontalAlignment.has(ft)?r.nodeToTempPositionMapVertical.set(ft,r.idToNodeMap.get(r.dummyToNodeForHorizontalAlignment.get(ft)[0]).getCenterY()):r.nodeToTempPositionMapVertical.set(ft,r.idToNodeMap.get(ft).getCenterY())),r.nodeToRelativeConstraintMapVertical.get(st).push({bottom:ft,gap:O.gap}),r.nodeToRelativeConstraintMapVertical.get(ft).push({top:st,gap:O.gap})}});else{var tt=new Map,lt=new Map;this.constraints.relativePlacementConstraint.forEach(function(O){if(O.left){var z=w.has(O.left)?w.get(O.left):O.left,K=w.has(O.right)?w.get(O.right):O.right;tt.has(z)?tt.get(z).push(K):tt.set(z,[K]),tt.has(K)?tt.get(K).push(z):tt.set(K,[z])}else{var st=X.has(O.top)?X.get(O.top):O.top,ft=X.has(O.bottom)?X.get(O.bottom):O.bottom;lt.has(st)?lt.get(st).push(ft):lt.set(st,[ft]),lt.has(ft)?lt.get(ft).push(st):lt.set(ft,[st])}});var W=function(z,K){var st=[],ft=[],it=new mt,Pt=new Set,Lt=0;return z.forEach(function(kt,Ut){if(!Pt.has(Ut)){st[Lt]=[],ft[Lt]=!1;var ut=Ut;for(it.push(ut),Pt.add(ut),st[Lt].push(ut);0!=it.length;)ut=it.shift(),K.has(ut)&&(ft[Lt]=!0),z.get(ut).forEach(function(xt){Pt.has(xt)||(it.push(xt),Pt.add(xt),st[Lt].push(xt))});Lt++}}),{components:st,isFixed:ft}},ht=W(tt,r.fixedNodesOnHorizontal);this.componentsOnHorizontal=ht.components,this.fixedComponentsOnHorizontal=ht.isFixed;var _=W(lt,r.fixedNodesOnVertical);this.componentsOnVertical=_.components,this.fixedComponentsOnVertical=_.isFixed}}},P.prototype.updateDisplacements=function(){var r=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(_){var O=r.idToNodeMap.get(_.nodeId);O.displacementX=0,O.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var m=this.constraints.alignmentConstraint.vertical,n=0;n<m.length;n++){for(var E=0,p=0;p<m[n].length;p++){if(this.fixedNodeSet.has(m[n][p])){E=0;break}E+=this.idToNodeMap.get(m[n][p]).displacementX}var I=E/m[n].length;for(p=0;p<m[n].length;p++)this.idToNodeMap.get(m[n][p]).displacementX=I}if(this.constraints.alignmentConstraint.horizontal){var w=this.constraints.alignmentConstraint.horizontal;for(n=0;n<w.length;n++){var X=0;for(p=0;p<w[n].length;p++){if(this.fixedNodeSet.has(w[n][p])){X=0;break}X+=this.idToNodeMap.get(w[n][p]).displacementY}var Y=X/w[n].length;for(p=0;p<w[n].length;p++)this.idToNodeMap.get(w[n][p]).displacementY=Y}}}if(this.constraints.relativePlacementConstraint)if(u.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(_){if(!r.fixedNodesOnHorizontal.has(_)){var O=0;O=r.dummyToNodeForVerticalAlignment.has(_)?r.idToNodeMap.get(r.dummyToNodeForVerticalAlignment.get(_)[0]).displacementX:r.idToNodeMap.get(_).displacementX,r.nodeToRelativeConstraintMapHorizontal.get(_).forEach(function(z){var K;z.right?(K=r.nodeToTempPositionMapHorizontal.get(z.right)-r.nodeToTempPositionMapHorizontal.get(_)-O)<z.gap&&(O-=z.gap-K):(K=r.nodeToTempPositionMapHorizontal.get(_)-r.nodeToTempPositionMapHorizontal.get(z.left)+O)<z.gap&&(O+=z.gap-K)}),r.nodeToTempPositionMapHorizontal.set(_,r.nodeToTempPositionMapHorizontal.get(_)+O),r.dummyToNodeForVerticalAlignment.has(_)?r.dummyToNodeForVerticalAlignment.get(_).forEach(function(z){r.idToNodeMap.get(z).displacementX=O}):r.idToNodeMap.get(_).displacementX=O}}),this.nodesInRelativeVertical.forEach(function(_){if(!r.fixedNodesOnHorizontal.has(_)){var O=0;O=r.dummyToNodeForHorizontalAlignment.has(_)?r.idToNodeMap.get(r.dummyToNodeForHorizontalAlignment.get(_)[0]).displacementY:r.idToNodeMap.get(_).displacementY,r.nodeToRelativeConstraintMapVertical.get(_).forEach(function(z){var K;z.bottom?(K=r.nodeToTempPositionMapVertical.get(z.bottom)-r.nodeToTempPositionMapVertical.get(_)-O)<z.gap&&(O-=z.gap-K):(K=r.nodeToTempPositionMapVertical.get(_)-r.nodeToTempPositionMapVertical.get(z.top)+O)<z.gap&&(O+=z.gap-K)}),r.nodeToTempPositionMapVertical.set(_,r.nodeToTempPositionMapVertical.get(_)+O),r.dummyToNodeForHorizontalAlignment.has(_)?r.dummyToNodeForHorizontalAlignment.get(_).forEach(function(z){r.idToNodeMap.get(z).displacementY=O}):r.idToNodeMap.get(_).displacementY=O}});else{for(n=0;n<this.componentsOnHorizontal.length;n++){var b=this.componentsOnHorizontal[n];if(this.fixedComponentsOnHorizontal[n])for(p=0;p<b.length;p++)this.dummyToNodeForVerticalAlignment.has(b[p])?this.dummyToNodeForVerticalAlignment.get(b[p]).forEach(function(z){r.idToNodeMap.get(z).displacementX=0}):this.idToNodeMap.get(b[p]).displacementX=0;else{var tt=0,lt=0;for(p=0;p<b.length;p++)this.dummyToNodeForVerticalAlignment.has(b[p])?(tt+=(W=this.dummyToNodeForVerticalAlignment.get(b[p])).length*this.idToNodeMap.get(W[0]).displacementX,lt+=W.length):(tt+=this.idToNodeMap.get(b[p]).displacementX,lt++);var ht=tt/lt;for(p=0;p<b.length;p++)this.dummyToNodeForVerticalAlignment.has(b[p])?this.dummyToNodeForVerticalAlignment.get(b[p]).forEach(function(z){r.idToNodeMap.get(z).displacementX=ht}):this.idToNodeMap.get(b[p]).displacementX=ht}}for(n=0;n<this.componentsOnVertical.length;n++)if(b=this.componentsOnVertical[n],this.fixedComponentsOnVertical[n])for(p=0;p<b.length;p++)this.dummyToNodeForHorizontalAlignment.has(b[p])?this.dummyToNodeForHorizontalAlignment.get(b[p]).forEach(function(K){r.idToNodeMap.get(K).displacementY=0}):this.idToNodeMap.get(b[p]).displacementY=0;else{for(tt=0,lt=0,p=0;p<b.length;p++)if(this.dummyToNodeForHorizontalAlignment.has(b[p])){var W;tt+=(W=this.dummyToNodeForHorizontalAlignment.get(b[p])).length*this.idToNodeMap.get(W[0]).displacementY,lt+=W.length}else tt+=this.idToNodeMap.get(b[p]).displacementY,lt++;for(ht=tt/lt,p=0;p<b.length;p++)this.dummyToNodeForHorizontalAlignment.has(b[p])?this.dummyToNodeForHorizontalAlignment.get(b[p]).forEach(function(it){r.idToNodeMap.get(it).displacementY=ht}):this.idToNodeMap.get(b[p]).displacementY=ht}}},P.prototype.calculateNodesToApplyGravitationTo=function(){var m,p,r=[],n=this.graphManager.getGraphs(),E=n.length;for(p=0;p<E;p++)(m=n[p]).updateConnected(),m.isConnected||(r=r.concat(m.getNodes()));return r},P.prototype.createBendpoints=function(){var r=[];r=r.concat(this.graphManager.getAllEdges());var n,m=new Set;for(n=0;n<r.length;n++){var E=r[n];if(!m.has(E)){var p=E.getSource(),I=E.getTarget();if(p==I)E.getBendpoints().push(new L),E.getBendpoints().push(new L),this.createDummyNodesForBendpoints(E),m.add(E);else{var w=[];if(w=(w=w.concat(p.getEdgeListToNode(I))).concat(I.getEdgeListToNode(p)),!m.has(w[0])){var X;if(w.length>1)for(X=0;X<w.length;X++){var Y=w[X];Y.getBendpoints().push(new L),this.createDummyNodesForBendpoints(Y)}w.forEach(function(b){m.add(b)})}}}if(m.size==r.length)break}},P.prototype.positionNodesRadially=function(r){for(var m=new N(0,0),n=Math.ceil(Math.sqrt(r.length)),E=0,p=0,I=0,w=new L(0,0),X=0;X<r.length;X++){X%n==0&&(I=0,p=E,0!=X&&(p+=u.DEFAULT_COMPONENT_SEPERATION),E=0);var Y=r[X],b=et.findCenterOfTree(Y);m.x=I,m.y=p,(w=P.radialLayout(Y,b,m)).y>E&&(E=Math.floor(w.y)),I=Math.floor(w.x+u.DEFAULT_COMPONENT_SEPERATION)}this.transform(new L(M.WORLD_CENTER_X-w.x/2,M.WORLD_CENTER_Y-w.y/2))},P.radialLayout=function(r,m,n){var E=Math.max(this.maxDiagonalInTree(r),u.DEFAULT_RADIAL_SEPARATION);P.branchRadialLayout(m,null,0,359,0,E);var p=dt.calculateBounds(r),I=new ct;I.setDeviceOrgX(p.getMinX()),I.setDeviceOrgY(p.getMinY()),I.setWorldOrgX(n.x),I.setWorldOrgY(n.y);for(var w=0;w<r.length;w++)r[w].transform(I);var Y=new L(p.getMaxX(),p.getMaxY());return I.inverseTransformPoint(Y)},P.branchRadialLayout=function(r,m,n,E,p,I){var w=(E-n+1)/2;w<0&&(w+=180);var Y=(w+n)%360*nt.TWO_PI/360,tt=(Math.cos(Y),p*Math.cos(Y)),lt=p*Math.sin(Y);r.setCenter(tt,lt);var W=[],ht=(W=W.concat(r.getEdges())).length;null!=m&&ht--;for(var z,_=0,O=W.length,K=r.getEdgesBetween(m);K.length>1;){var st=K[0];K.splice(0,1);var ft=W.indexOf(st);ft>=0&&W.splice(ft,1),O--,ht--}z=null!=m?(W.indexOf(K[0])+1)%O:0;for(var it=Math.abs(E-n)/ht,Pt=z;_!=ht;Pt=++Pt%O){var Lt=W[Pt].getOtherEnd(r);if(Lt!=m){var kt=(n+_*it)%360;P.branchRadialLayout(Lt,r,kt,(kt+it)%360,p+I,I),_++}}},P.maxDiagonalInTree=function(r){for(var m=x.MIN_VALUE,n=0;n<r.length;n++){var p=r[n].getDiagonal();p>m&&(m=p)}return m},P.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},P.prototype.groupZeroDegreeMembers=function(){var r=this,m={};this.memberGroups={},this.idToDummyNode={};for(var n=[],E=this.graphManager.getAllNodes(),p=0;p<E.length;p++){var w=(I=E[p]).getParent();0===this.getNodeDegreeWithChildren(I)&&(null==w.id||!this.getToBeTiled(w))&&n.push(I)}for(p=0;p<n.length;p++){var I,X=(I=n[p]).getParent().id;typeof m[X]>"u"&&(m[X]=[]),m[X]=m[X].concat(I)}Object.keys(m).forEach(function(Y){if(m[Y].length>1){var b="DummyCompound_"+Y;r.memberGroups[b]=m[Y];var tt=m[Y][0].getParent(),lt=new l(r.graphManager);lt.id=b,lt.paddingLeft=tt.paddingLeft||0,lt.paddingRight=tt.paddingRight||0,lt.paddingBottom=tt.paddingBottom||0,lt.paddingTop=tt.paddingTop||0,r.idToDummyNode[b]=lt;var W=r.getGraphManager().add(r.newGraph(),lt),ht=tt.getChild();ht.add(lt);for(var _=0;_<m[Y].length;_++){var O=m[Y][_];ht.remove(O),W.add(O)}}})},P.prototype.clearCompounds=function(){var r={},m={};this.performDFSOnCompounds();for(var n=0;n<this.compoundOrder.length;n++)m[this.compoundOrder[n].id]=this.compoundOrder[n],r[this.compoundOrder[n].id]=[].concat(this.compoundOrder[n].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[n].getChild()),this.compoundOrder[n].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(r,m)},P.prototype.clearZeroDegreeMembers=function(){var r=this,m=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(n){var E=r.idToDummyNode[n];if(m[n]=r.tileNodes(r.memberGroups[n],E.paddingLeft+E.paddingRight),E.rect.width=m[n].width,E.rect.height=m[n].height,E.setCenter(m[n].centerX,m[n].centerY),E.labelMarginLeft=0,E.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var p=E.rect.width,I=E.rect.height;E.labelWidth&&("left"==E.labelPosHorizontal?(E.rect.x-=E.labelWidth,E.setWidth(p+E.labelWidth),E.labelMarginLeft=E.labelWidth):"center"==E.labelPosHorizontal&&E.labelWidth>p?(E.rect.x-=(E.labelWidth-p)/2,E.setWidth(E.labelWidth),E.labelMarginLeft=(E.labelWidth-p)/2):"right"==E.labelPosHorizontal&&E.setWidth(p+E.labelWidth)),E.labelHeight&&("top"==E.labelPosVertical?(E.rect.y-=E.labelHeight,E.setHeight(I+E.labelHeight),E.labelMarginTop=E.labelHeight):"center"==E.labelPosVertical&&E.labelHeight>I?(E.rect.y-=(E.labelHeight-I)/2,E.setHeight(E.labelHeight),E.labelMarginTop=(E.labelHeight-I)/2):"bottom"==E.labelPosVertical&&E.setHeight(I+E.labelHeight))}})},P.prototype.repopulateCompounds=function(){for(var r=this.compoundOrder.length-1;r>=0;r--){var m=this.compoundOrder[r];this.adjustLocations(this.tiledMemberPack[m.id],m.rect.x,m.rect.y,m.paddingLeft,m.paddingTop,m.labelMarginLeft,m.labelMarginTop)}},P.prototype.repopulateZeroDegreeMembers=function(){var r=this,m=this.tiledZeroDegreePack;Object.keys(m).forEach(function(n){var E=r.idToDummyNode[n];r.adjustLocations(m[n],E.rect.x,E.rect.y,E.paddingLeft,E.paddingTop,E.labelMarginLeft,E.labelMarginTop)})},P.prototype.getToBeTiled=function(r){var m=r.id;if(null!=this.toBeTiled[m])return this.toBeTiled[m];var n=r.getChild();if(null==n)return this.toBeTiled[m]=!1,!1;for(var E=n.getNodes(),p=0;p<E.length;p++){var I=E[p];if(this.getNodeDegree(I)>0)return this.toBeTiled[m]=!1,!1;if(null!=I.getChild()){if(!this.getToBeTiled(I))return this.toBeTiled[m]=!1,!1}else this.toBeTiled[I.id]=!1}return this.toBeTiled[m]=!0,!0},P.prototype.getNodeDegree=function(r){for(var n=r.getEdges(),E=0,p=0;p<n.length;p++){var I=n[p];I.getSource().id!==I.getTarget().id&&(E+=1)}return E},P.prototype.getNodeDegreeWithChildren=function(r){var m=this.getNodeDegree(r);if(null==r.getChild())return m;for(var n=r.getChild().getNodes(),E=0;E<n.length;E++)m+=this.getNodeDegreeWithChildren(n[E]);return m},P.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},P.prototype.fillCompexOrderByDFS=function(r){for(var m=0;m<r.length;m++){var n=r[m];null!=n.getChild()&&this.fillCompexOrderByDFS(n.getChild().getNodes()),this.getToBeTiled(n)&&this.compoundOrder.push(n)}},P.prototype.adjustLocations=function(r,m,n,E,p,I,w){n+=p+w;for(var X=m+=E+I,Y=0;Y<r.rows.length;Y++){var b=r.rows[Y];m=X;for(var tt=0,lt=0;lt<b.length;lt++){var W=b[lt];W.rect.x=m,W.rect.y=n,m+=W.rect.width+r.horizontalPadding,W.rect.height>tt&&(tt=W.rect.height)}n+=tt+r.verticalPadding}},P.prototype.tileCompoundMembers=function(r,m){var n=this;this.tiledMemberPack=[],Object.keys(r).forEach(function(E){var p=m[E];if(n.tiledMemberPack[E]=n.tileNodes(r[E],p.paddingLeft+p.paddingRight),p.rect.width=n.tiledMemberPack[E].width,p.rect.height=n.tiledMemberPack[E].height,p.setCenter(n.tiledMemberPack[E].centerX,n.tiledMemberPack[E].centerY),p.labelMarginLeft=0,p.labelMarginTop=0,u.NODE_DIMENSIONS_INCLUDE_LABELS){var I=p.rect.width,w=p.rect.height;p.labelWidth&&("left"==p.labelPosHorizontal?(p.rect.x-=p.labelWidth,p.setWidth(I+p.labelWidth),p.labelMarginLeft=p.labelWidth):"center"==p.labelPosHorizontal&&p.labelWidth>I?(p.rect.x-=(p.labelWidth-I)/2,p.setWidth(p.labelWidth),p.labelMarginLeft=(p.labelWidth-I)/2):"right"==p.labelPosHorizontal&&p.setWidth(I+p.labelWidth)),p.labelHeight&&("top"==p.labelPosVertical?(p.rect.y-=p.labelHeight,p.setHeight(w+p.labelHeight),p.labelMarginTop=p.labelHeight):"center"==p.labelPosVertical&&p.labelHeight>w?(p.rect.y-=(p.labelHeight-w)/2,p.setHeight(p.labelHeight),p.labelMarginTop=(p.labelHeight-w)/2):"bottom"==p.labelPosVertical&&p.setHeight(w+p.labelHeight))}})},P.prototype.tileNodes=function(r,m){var n=this.tileNodesByFavoringDim(r,m,!0),E=this.tileNodesByFavoringDim(r,m,!1),p=this.getOrgRatio(n);return this.getOrgRatio(E)<p?E:n},P.prototype.getOrgRatio=function(r){var E=r.width/r.height;return E<1&&(E=1/E),E},P.prototype.calcIdealRowWidth=function(r,m){var n=u.TILING_PADDING_VERTICAL,E=u.TILING_PADDING_HORIZONTAL,p=r.length,I=0,w=0,X=0;r.forEach(function(_){I+=_.getWidth(),w+=_.getHeight(),_.getWidth()>X&&(X=_.getWidth())});var W,Y=I/p,b=w/p,tt=Math.pow(n-E,2)+4*(Y+E)*(b+n)*p,lt=(E-n+Math.sqrt(tt))/(2*(Y+E));m?(W=Math.ceil(lt))==lt&&W++:W=Math.floor(lt);var ht=W*(Y+E)-E;return X>ht&&(ht=X),ht+2*E},P.prototype.tileNodesByFavoringDim=function(r,m,n){var I=u.TILING_COMPARE_BY,w={rows:[],rowWidth:[],rowHeight:[],width:0,height:m,verticalPadding:u.TILING_PADDING_VERTICAL,horizontalPadding:u.TILING_PADDING_HORIZONTAL,centerX:0,centerY:0};I&&(w.idealRowWidth=this.calcIdealRowWidth(r,n));var X=function(O){return O.rect.width*O.rect.height},Y=function(O,z){return X(z)-X(O)};r.sort(function(_,O){var z=Y;return w.idealRowWidth?(z=I)(_.id,O.id):z(_,O)});for(var b=0,tt=0,lt=0;lt<r.length;lt++)b+=(W=r[lt]).getCenterX(),tt+=W.getCenterY();for(w.centerX=b/r.length,w.centerY=tt/r.length,lt=0;lt<r.length;lt++){var W=r[lt];if(0==w.rows.length)this.insertNodeToRow(w,W,0,m);else if(this.canAddHorizontal(w,W.rect.width,W.rect.height)){var ht=w.rows.length-1;w.idealRowWidth||(ht=this.getShortestRowIndex(w)),this.insertNodeToRow(w,W,ht,m)}else this.insertNodeToRow(w,W,w.rows.length,m);this.shiftToLastRow(w)}return w},P.prototype.insertNodeToRow=function(r,m,n,E){var p=E;n==r.rows.length&&(r.rows.push([]),r.rowWidth.push(p),r.rowHeight.push(0));var w=r.rowWidth[n]+m.rect.width;r.rows[n].length>0&&(w+=r.horizontalPadding),r.rowWidth[n]=w,r.width<w&&(r.width=w);var X=m.rect.height;n>0&&(X+=r.verticalPadding);var Y=0;X>r.rowHeight[n]&&(Y=r.rowHeight[n],r.rowHeight[n]=X,Y=r.rowHeight[n]-Y),r.height+=Y,r.rows[n].push(m)},P.prototype.getShortestRowIndex=function(r){for(var m=-1,n=Number.MAX_VALUE,E=0;E<r.rows.length;E++)r.rowWidth[E]<n&&(m=E,n=r.rowWidth[E]);return m},P.prototype.getLongestRowIndex=function(r){for(var m=-1,n=Number.MIN_VALUE,E=0;E<r.rows.length;E++)r.rowWidth[E]>n&&(m=E,n=r.rowWidth[E]);return m},P.prototype.canAddHorizontal=function(r,m,n){if(r.idealRowWidth)return r.rowWidth[r.rows.length-1]+m+r.horizontalPadding<=r.idealRowWidth;var I=this.getShortestRowIndex(r);if(I<0)return!0;var w=r.rowWidth[I];if(w+r.horizontalPadding+m<=r.width)return!0;var Y,b,X=0;return r.rowHeight[I]<n&&I>0&&(X=n+r.verticalPadding-r.rowHeight[I]),Y=r.width-w>=m+r.horizontalPadding?(r.height+X)/(w+m+r.horizontalPadding):(r.height+X)/r.width,X=n+r.verticalPadding,(b=r.width<m?(r.height+X)/m:(r.height+X)/r.width)<1&&(b=1/b),Y<1&&(Y=1/Y),Y<b},P.prototype.shiftToLastRow=function(r){var m=this.getLongestRowIndex(r),n=r.rowWidth.length-1,E=r.rows[m],p=E[E.length-1],I=p.width+r.horizontalPadding;if(r.width-r.rowWidth[n]>I&&m!=n){E.splice(-1,1),r.rows[n].push(p),r.rowWidth[m]=r.rowWidth[m]-I,r.rowWidth[n]=r.rowWidth[n]+I,r.width=r.rowWidth[instance.getLongestRowIndex(r)];for(var w=Number.MIN_VALUE,X=0;X<E.length;X++)E[X].height>w&&(w=E[X].height);m>0&&(w+=r.verticalPadding);var Y=r.rowHeight[m]+r.rowHeight[n];r.rowHeight[m]=w,r.rowHeight[n]<p.height+r.verticalPadding&&(r.rowHeight[n]=p.height+r.verticalPadding),r.height+=r.rowHeight[m]+r.rowHeight[n]-Y,this.shiftToLastRow(r)}},P.prototype.tilingPreLayout=function(){u.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},P.prototype.tilingPostLayout=function(){u.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},P.prototype.reduceTrees=function(){for(var n,r=[],m=!0;m;){var E=this.graphManager.getAllNodes(),p=[];m=!1;for(var I=0;I<E.length;I++)if(1==(n=E[I]).getEdges().length&&!n.getEdges()[0].isInterGraph&&null==n.getChild()){if(u.PURE_INCREMENTAL){var w=n.getEdges()[0].getOtherEnd(n),X=new D(n.getCenterX()-w.getCenterX(),n.getCenterY()-w.getCenterY());p.push([n,n.getEdges()[0],n.getOwner(),X])}else p.push([n,n.getEdges()[0],n.getOwner()]);m=!0}if(1==m){for(var Y=[],b=0;b<p.length;b++)1==p[b][0].getEdges().length&&(Y.push(p[b]),p[b][0].getOwner().remove(p[b][0]));r.push(Y),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=r},P.prototype.growTree=function(r){for(var E,n=r[r.length-1],p=0;p<n.length;p++)this.findPlaceforPrunedNode(E=n[p]),E[2].add(E[0]),E[2].add(E[1],E[1].source,E[1].target);r.splice(r.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},P.prototype.findPlaceforPrunedNode=function(r){var m,n,E=r[0];if(n=E==r[1].source?r[1].target:r[1].source,u.PURE_INCREMENTAL)E.setCenter(n.getCenterX()+r[3].getWidth(),n.getCenterY()+r[3].getHeight());else{var p=n.startX,I=n.finishX,w=n.startY,X=n.finishY,W=[0,0,0,0];if(w>0)for(var ht=p;ht<=I;ht++)W[0]+=this.grid[ht][w-1].length+this.grid[ht][w].length-1;if(I<this.grid.length-1)for(ht=w;ht<=X;ht++)W[1]+=this.grid[I+1][ht].length+this.grid[I][ht].length-1;if(X<this.grid[0].length-1)for(ht=p;ht<=I;ht++)W[2]+=this.grid[ht][X+1].length+this.grid[ht][X].length-1;if(p>0)for(ht=w;ht<=X;ht++)W[3]+=this.grid[p-1][ht].length+this.grid[p][ht].length-1;for(var O,z,_=x.MAX_VALUE,K=0;K<W.length;K++)W[K]<_?(_=W[K],O=1,z=K):W[K]==_&&O++;if(3==O&&0==_)0==W[0]&&0==W[1]&&0==W[2]?m=1:0==W[0]&&0==W[1]&&0==W[3]?m=0:0==W[0]&&0==W[2]&&0==W[3]?m=3:0==W[1]&&0==W[2]&&0==W[3]&&(m=2);else if(2==O&&0==_){var st=Math.floor(2*Math.random());m=0==W[0]&&0==W[1]?0==st?0:1:0==W[0]&&0==W[2]?0==st?0:2:0==W[0]&&0==W[3]?0==st?0:3:0==W[1]&&0==W[2]?0==st?1:2:0==W[1]&&0==W[3]?0==st?1:3:0==st?2:3}else m=4==O&&0==_?st=Math.floor(4*Math.random()):z;0==m?E.setCenter(n.getCenterX(),n.getCenterY()-n.getHeight()/2-c.DEFAULT_EDGE_LENGTH-E.getHeight()/2):1==m?E.setCenter(n.getCenterX()+n.getWidth()/2+c.DEFAULT_EDGE_LENGTH+E.getWidth()/2,n.getCenterY()):2==m?E.setCenter(n.getCenterX(),n.getCenterY()+n.getHeight()/2+c.DEFAULT_EDGE_LENGTH+E.getHeight()/2):E.setCenter(n.getCenterX()-n.getWidth()/2-c.DEFAULT_EDGE_LENGTH-E.getWidth()/2,n.getCenterY())}},s.exports=P},991:(s,f,e)=>{var d=e(551).FDLayoutNode,t=e(551).IMath;function i(g,u,T,c){d.call(this,g,u,T,c)}for(var l in i.prototype=Object.create(d.prototype),d)i[l]=d[l];i.prototype.calculateDisplacement=function(){var g=this.graphManager.getLayout();null!=this.getChild()&&this.fixedNodeWeight?(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=g.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=g.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementX=g.coolingFactor*g.maxNodeDisplacement*t.sign(this.displacementX)),Math.abs(this.displacementY)>g.coolingFactor*g.maxNodeDisplacement&&(this.displacementY=g.coolingFactor*g.maxNodeDisplacement*t.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},i.prototype.propogateDisplacementToChildren=function(g,u){for(var c,T=this.getChild().getNodes(),M=0;M<T.length;M++)null==(c=T[M]).getChild()?(c.displacementX+=g,c.displacementY+=u):c.propogateDisplacementToChildren(g,u)},i.prototype.move=function(){var g=this.graphManager.getLayout();(null==this.child||0==this.child.getNodes().length)&&(this.moveBy(this.displacementX,this.displacementY),g.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},i.prototype.setPred1=function(g){this.pred1=g},i.prototype.getPred1=function(){return pred1},i.prototype.getPred2=function(){return pred2},i.prototype.setNext=function(g){this.next=g},i.prototype.getNext=function(){return next},i.prototype.setProcessed=function(g){this.processed=g},i.prototype.isProcessed=function(){return processed},s.exports=i},902:(s,f,e)=>{function d(T){if(Array.isArray(T)){for(var c=0,M=Array(T.length);c<T.length;c++)M[c]=T[c];return M}return Array.from(T)}var t=e(806),i=e(551).LinkedList,l=e(551).Matrix,g=e(551).SVD;function u(){}u.handleConstraints=function(T){var c={};c.fixedNodeConstraint=T.constraints.fixedNodeConstraint,c.alignmentConstraint=T.constraints.alignmentConstraint,c.relativePlacementConstraint=T.constraints.relativePlacementConstraint;for(var M=new Map,N=new Map,L=[],D=[],et=T.getAllNodes(),x=0,nt=0;nt<et.length;nt++){var dt=et[nt];null==dt.getChild()&&(N.set(dt.id,x++),L.push(dt.getCenterX()),D.push(dt.getCenterY()),M.set(dt.id,dt))}c.relativePlacementConstraint&&c.relativePlacementConstraint.forEach(function(V){!V.gap&&0!=V.gap&&(V.gap=V.left?t.DEFAULT_EDGE_LENGTH+M.get(V.left).getWidth()/2+M.get(V.right).getWidth()/2:t.DEFAULT_EDGE_LENGTH+M.get(V.top).getHeight()/2+M.get(V.bottom).getHeight()/2)});var mt=function(Q){var q=0,v=0;return Q.forEach(function(A){q+=L[N.get(A)],v+=D[N.get(A)]}),{x:q/Q.size,y:v/Q.size}},P=function(Q,q,v,A,C){var G=new Map;Q.forEach(function(H,k){G.set(k,0)}),Q.forEach(function(H,k){H.forEach(function(rt){G.set(rt.id,G.get(rt.id)+1)})});var S=new Map,F=new Map,$=new i;G.forEach(function(H,k){0==H?($.push(k),v||S.set(k,"horizontal"==q?N.has(k)?L[N.get(k)]:A.get(k):N.has(k)?D[N.get(k)]:A.get(k))):S.set(k,Number.NEGATIVE_INFINITY),v&&F.set(k,new Set([k]))}),v&&C.forEach(function(H){var k=[];if(H.forEach(function(j){v.has(j)&&k.push(j)}),k.length>0){var rt=0;k.forEach(function(j){"horizontal"==q?(S.set(j,N.has(j)?L[N.get(j)]:A.get(j)),rt+=S.get(j)):(S.set(j,N.has(j)?D[N.get(j)]:A.get(j)),rt+=S.get(j))}),rt/=k.length,H.forEach(function(j){v.has(j)||S.set(j,rt)})}else{var B=0;H.forEach(function(j){B+="horizontal"==q?N.has(j)?L[N.get(j)]:A.get(j):N.has(j)?D[N.get(j)]:A.get(j)}),B/=H.length,H.forEach(function(j){S.set(j,B)})}});for(var ot=function(){var k=$.shift();Q.get(k).forEach(function(B){if(S.get(B.id)<S.get(k)+B.gap)if(v&&v.has(B.id)){var j;if(j="horizontal"==q?N.has(B.id)?L[N.get(B.id)]:A.get(B.id):N.has(B.id)?D[N.get(B.id)]:A.get(B.id),S.set(B.id,j),j<S.get(k)+B.gap){var Ot=S.get(k)+B.gap-j;F.get(k).forEach(function(pt){S.set(pt,S.get(pt)-Ot)})}}else S.set(B.id,S.get(k)+B.gap);G.set(B.id,G.get(B.id)-1),0==G.get(B.id)&&$.push(B.id),v&&F.set(B.id,function Z(H,k){var rt=new Set(H),B=!0,j=!1,Ot=void 0;try{for(var yt,pt=k[Symbol.iterator]();!(B=(yt=pt.next()).done);B=!0)rt.add(yt.value)}catch(Nt){j=!0,Ot=Nt}finally{try{!B&&pt.return&&pt.return()}finally{if(j)throw Ot}}return rt}(F.get(k),F.get(B.id)))})};0!=$.length;)ot();if(v){var U=new Set;Q.forEach(function(H,k){0==H.length&&U.add(k)});var at=[];F.forEach(function(H,k){if(U.has(k)){var rt=!1,B=!0,j=!1,Ot=void 0;try{for(var yt,pt=H[Symbol.iterator]();!(B=(yt=pt.next()).done);B=!0)v.has(yt.value)&&(rt=!0)}catch(wt){j=!0,Ot=wt}finally{try{!B&&pt.return&&pt.return()}finally{if(j)throw Ot}}if(!rt){var Nt=!1,St=void 0;at.forEach(function(wt,Gt){wt.has([].concat(d(H))[0])&&(Nt=!0,St=Gt)}),Nt?H.forEach(function(wt){at[St].add(wt)}):at.push(new Set(H))}}}),at.forEach(function(H,k){var rt=Number.POSITIVE_INFINITY,B=Number.POSITIVE_INFINITY,j=Number.NEGATIVE_INFINITY,Ot=Number.NEGATIVE_INFINITY,pt=!0,yt=!1,It=void 0;try{for(var St,Nt=H[Symbol.iterator]();!(pt=(St=Nt.next()).done);pt=!0){var Gt,wt=St.value;Gt="horizontal"==q?N.has(wt)?L[N.get(wt)]:A.get(wt):N.has(wt)?D[N.get(wt)]:A.get(wt);var zt=S.get(wt);Gt<rt&&(rt=Gt),Gt>j&&(j=Gt),zt<B&&(B=zt),zt>Ot&&(Ot=zt)}}catch(qt){yt=!0,It=qt}finally{try{!pt&&Nt.return&&Nt.return()}finally{if(yt)throw It}}var Ht=(rt+j)/2-(B+Ot)/2,Vt=!0,$t=!1,Zt=void 0;try{for(var _t,Kt=H[Symbol.iterator]();!(Vt=(_t=Kt.next()).done);Vt=!0){var jt=_t.value;S.set(jt,S.get(jt)+Ht)}}catch(qt){$t=!0,Zt=qt}finally{try{!Vt&&Kt.return&&Kt.return()}finally{if($t)throw Zt}}})}return S},J=function(Q){var q=0,v=0,A=0,C=0;if(Q.forEach(function(F){F.left?L[N.get(F.left)]-L[N.get(F.right)]>=0?q++:v++:D[N.get(F.top)]-D[N.get(F.bottom)]>=0?A++:C++}),q>v&&A>C)for(var Z=0;Z<N.size;Z++)L[Z]=-1*L[Z],D[Z]=-1*D[Z];else if(q>v)for(var G=0;G<N.size;G++)L[G]=-1*L[G];else if(A>C)for(var S=0;S<N.size;S++)D[S]=-1*D[S]},r=function(Q){var q=[],v=new i,A=new Set,C=0;return Q.forEach(function(Z,G){if(!A.has(G)){q[C]=[];var S=G;for(v.push(S),A.add(S),q[C].push(S);0!=v.length;)S=v.shift(),Q.get(S).forEach(function($){A.has($.id)||(v.push($.id),A.add($.id),q[C].push($.id))});C++}}),q},m=function(Q){var q=new Map;return Q.forEach(function(v,A){q.set(A,[])}),Q.forEach(function(v,A){v.forEach(function(C){q.get(A).push(C),q.get(C.id).push({id:A,gap:C.gap,direction:C.direction})})}),q},n=function(Q){var q=new Map;return Q.forEach(function(v,A){q.set(A,[])}),Q.forEach(function(v,A){v.forEach(function(C){q.get(C.id).push({id:A,gap:C.gap,direction:C.direction})})}),q},E=[],p=[],I=!1,w=!1,X=new Set,Y=new Map,b=new Map,tt=[];if(c.fixedNodeConstraint&&c.fixedNodeConstraint.forEach(function(V){X.add(V.nodeId)}),c.relativePlacementConstraint&&(c.relativePlacementConstraint.forEach(function(V){V.left?(Y.has(V.left)?Y.get(V.left).push({id:V.right,gap:V.gap,direction:"horizontal"}):Y.set(V.left,[{id:V.right,gap:V.gap,direction:"horizontal"}]),Y.has(V.right)||Y.set(V.right,[])):(Y.has(V.top)?Y.get(V.top).push({id:V.bottom,gap:V.gap,direction:"vertical"}):Y.set(V.top,[{id:V.bottom,gap:V.gap,direction:"vertical"}]),Y.has(V.bottom)||Y.set(V.bottom,[]))}),b=m(Y),tt=r(b)),t.TRANSFORM_ON_CONSTRAINT_HANDLING){if(c.fixedNodeConstraint&&c.fixedNodeConstraint.length>1)c.fixedNodeConstraint.forEach(function(V,Q){E[Q]=[V.position.x,V.position.y],p[Q]=[L[N.get(V.nodeId)],D[N.get(V.nodeId)]]}),I=!0;else if(c.alignmentConstraint)!function(){var V=0;if(c.alignmentConstraint.vertical){for(var Q=c.alignmentConstraint.vertical,q=function(S){var F=new Set;Q[S].forEach(function(U){F.add(U)});var ot,$=new Set([].concat(d(F)).filter(function(U){return X.has(U)}));ot=$.size>0?L[N.get($.values().next().value)]:mt(F).x,Q[S].forEach(function(U){E[V]=[ot,D[N.get(U)]],p[V]=[L[N.get(U)],D[N.get(U)]],V++})},v=0;v<Q.length;v++)q(v);I=!0}if(c.alignmentConstraint.horizontal){for(var A=c.alignmentConstraint.horizontal,C=function(S){var F=new Set;A[S].forEach(function(U){F.add(U)});var ot,$=new Set([].concat(d(F)).filter(function(U){return X.has(U)}));ot=$.size>0?L[N.get($.values().next().value)]:mt(F).y,A[S].forEach(function(U){E[V]=[L[N.get(U)],ot],p[V]=[L[N.get(U)],D[N.get(U)]],V++})},Z=0;Z<A.length;Z++)C(Z);I=!0}c.relativePlacementConstraint&&(w=!0)}();else if(c.relativePlacementConstraint){for(var lt=0,W=0,ht=0;ht<tt.length;ht++)tt[ht].length>lt&&(lt=tt[ht].length,W=ht);if(lt<b.size/2)J(c.relativePlacementConstraint),I=!1,w=!1;else{var _=new Map,O=new Map,z=[];tt[W].forEach(function(V){Y.get(V).forEach(function(Q){"horizontal"==Q.direction?(_.has(V)?_.get(V).push(Q):_.set(V,[Q]),_.has(Q.id)||_.set(Q.id,[]),z.push({left:V,right:Q.id})):(O.has(V)?O.get(V).push(Q):O.set(V,[Q]),O.has(Q.id)||O.set(Q.id,[]),z.push({top:V,bottom:Q.id}))})}),J(z),w=!1;var K=P(_,"horizontal"),st=P(O,"vertical");tt[W].forEach(function(V,Q){p[Q]=[L[N.get(V)],D[N.get(V)]],E[Q]=[],E[Q][0]=K.has(V)?K.get(V):L[N.get(V)],E[Q][1]=st.has(V)?st.get(V):D[N.get(V)]}),I=!0}}if(I){for(var ft,it=l.transpose(E),Pt=l.transpose(p),Lt=0;Lt<it.length;Lt++)it[Lt]=l.multGamma(it[Lt]),Pt[Lt]=l.multGamma(Pt[Lt]);var kt=l.multMat(it,l.transpose(Pt)),Ut=g.svd(kt);ft=l.multMat(Ut.V,l.transpose(Ut.U));for(var ut=0;ut<N.size;ut++){var gt=[L[ut],D[ut]],Dt=[ft[0][1],ft[1][1]];L[ut]=l.dotProduct(gt,[ft[0][0],ft[1][0]]),D[ut]=l.dotProduct(gt,Dt)}w&&J(c.relativePlacementConstraint)}}if(t.ENFORCE_CONSTRAINTS){if(c.fixedNodeConstraint&&c.fixedNodeConstraint.length>0){var At={x:0,y:0};c.fixedNodeConstraint.forEach(function(V,Q){var q={x:L[N.get(V.nodeId)],y:D[N.get(V.nodeId)]},A=function(Q,q){return{x:Q.x-q.x,y:Q.y-q.y}}(V.position,q);At.x+=A.x,At.y+=A.y}),At.x/=c.fixedNodeConstraint.length,At.y/=c.fixedNodeConstraint.length,L.forEach(function(V,Q){L[Q]+=At.x}),D.forEach(function(V,Q){D[Q]+=At.y}),c.fixedNodeConstraint.forEach(function(V){L[N.get(V.nodeId)]=V.position.x,D[N.get(V.nodeId)]=V.position.y})}if(c.alignmentConstraint){if(c.alignmentConstraint.vertical)for(var Ct=c.alignmentConstraint.vertical,Mt=function(Q){var q=new Set;Ct[Q].forEach(function(C){q.add(C)});var A,v=new Set([].concat(d(q)).filter(function(C){return X.has(C)}));A=v.size>0?L[N.get(v.values().next().value)]:mt(q).x,q.forEach(function(C){X.has(C)||(L[N.get(C)]=A)})},Rt=0;Rt<Ct.length;Rt++)Mt(Rt);if(c.alignmentConstraint.horizontal)for(var Wt=c.alignmentConstraint.horizontal,Jt=function(Q){var q=new Set;Wt[Q].forEach(function(C){q.add(C)});var A,v=new Set([].concat(d(q)).filter(function(C){return X.has(C)}));A=v.size>0?D[N.get(v.values().next().value)]:mt(q).y,q.forEach(function(C){X.has(C)||(D[N.get(C)]=A)})},bt=0;bt<Wt.length;bt++)Jt(bt)}c.relativePlacementConstraint&&function(){var V=new Map,Q=new Map,q=new Map,v=new Map,A=new Map,C=new Map,Z=new Set,G=new Set;if(X.forEach(function(Bt){Z.add(Bt),G.add(Bt)}),c.alignmentConstraint){if(c.alignmentConstraint.vertical)for(var S=c.alignmentConstraint.vertical,F=function(Tt){q.set("dummy"+Tt,[]),S[Tt].forEach(function(Ft){V.set(Ft,"dummy"+Tt),q.get("dummy"+Tt).push(Ft),X.has(Ft)&&Z.add("dummy"+Tt)}),A.set("dummy"+Tt,L[N.get(S[Tt][0])])},$=0;$<S.length;$++)F($);if(c.alignmentConstraint.horizontal)for(var ot=c.alignmentConstraint.horizontal,U=function(Tt){v.set("dummy"+Tt,[]),ot[Tt].forEach(function(Ft){Q.set(Ft,"dummy"+Tt),v.get("dummy"+Tt).push(Ft),X.has(Ft)&&G.add("dummy"+Tt)}),C.set("dummy"+Tt,D[N.get(ot[Tt][0])])},at=0;at<ot.length;at++)U(at)}var H=new Map,k=new Map,rt=function(Tt){Y.get(Tt).forEach(function(Ft){var te=void 0,Qt=void 0;"horizontal"==Ft.direction?(te=V.get(Tt)?V.get(Tt):Tt,Qt=V.get(Ft.id)?{id:V.get(Ft.id),gap:Ft.gap,direction:Ft.direction}:Ft,H.has(te)?H.get(te).push(Qt):H.set(te,[Qt]),H.has(Qt.id)||H.set(Qt.id,[])):(te=Q.get(Tt)?Q.get(Tt):Tt,Qt=Q.get(Ft.id)?{id:Q.get(Ft.id),gap:Ft.gap,direction:Ft.direction}:Ft,k.has(te)?k.get(te).push(Qt):k.set(te,[Qt]),k.has(Qt.id)||k.set(Qt.id,[]))})},B=!0,j=!1,Ot=void 0;try{for(var yt,pt=Y.keys()[Symbol.iterator]();!(B=(yt=pt.next()).done);B=!0)rt(yt.value)}catch(Bt){j=!0,Ot=Bt}finally{try{!B&&pt.return&&pt.return()}finally{if(j)throw Ot}}var Nt=m(H),St=m(k),wt=r(Nt),Gt=r(St),zt=n(H),Ht=n(k),Vt=[],$t=[];wt.forEach(function(Bt,Tt){Vt[Tt]=[],Bt.forEach(function(Ft){0==zt.get(Ft).length&&Vt[Tt].push(Ft)})}),Gt.forEach(function(Bt,Tt){$t[Tt]=[],Bt.forEach(function(Ft){0==Ht.get(Ft).length&&$t[Tt].push(Ft)})});var Zt=P(H,"horizontal",Z,A,Vt),Kt=P(k,"vertical",G,C,$t),_t=function(Tt){q.get(Tt)?q.get(Tt).forEach(function(Ft){L[N.get(Ft)]=Zt.get(Tt)}):L[N.get(Tt)]=Zt.get(Tt)},jt=!0,qt=!1,re=void 0;try{for(var se,ie=Zt.keys()[Symbol.iterator]();!(jt=(se=ie.next()).done);jt=!0)_t(se.value)}catch(Bt){qt=!0,re=Bt}finally{try{!jt&&ie.return&&ie.return()}finally{if(qt)throw re}}var ce=function(Tt){v.get(Tt)?v.get(Tt).forEach(function(Ft){D[N.get(Ft)]=Kt.get(Tt)}):D[N.get(Tt)]=Kt.get(Tt)},ne=!0,le=!1,he=void 0;try{for(var fe,oe=Kt.keys()[Symbol.iterator]();!(ne=(fe=oe.next()).done);ne=!0)ce(fe.value)}catch(Bt){le=!0,he=Bt}finally{try{!ne&&oe.return&&oe.return()}finally{if(le)throw he}}}()}for(var Yt=0;Yt<et.length;Yt++){var Xt=et[Yt];null==Xt.getChild()&&Xt.setCenter(L[N.get(Xt.id)],D[N.get(Xt.id)])}},s.exports=u},551:s=>{s.exports=R}},h={};return function o(s){var f=h[s];if(void 0!==f)return f.exports;var e=h[s]={exports:{}};return y[s](e,e.exports,o),e.exports}(45)})())}}]);